import{A as B}from"./AdminLayout.359c072a.js";import{L as P,H as L,a as v,o as n,c as o,f as h,w as u,F as m,d as t,m as _,s as b,h as f,v as y,p as V,g as w,e as g,t as d,u as G,q as N,l as T}from"./app.62f83056.js";import{P as D}from"./Pagination.6faaf1b3.js";import{_ as S}from"./_plugin-vue_export-helper.cdc0426e.js";const j={components:{AdminLayout:B,Link:P,Pagination:D,Head:L},props:["orders","groups","user"],data(){return{filter:{name:route().params.name?route().params.name:null},loading:0,newGroup:""}},methods:{setNewGroup(l,a=null){this.$inertia.put(route("admin.students.update",l),{name:this.newGroup,groupId:a})},setPaid(l,a){a?Swal.fire({title:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043E\u043F\u043B\u0430\u0442\u0443",icon:"success",showCancelButton:!0,confirmButtonColor:"#71DD37",cancelButtonColor:"#adb5bd",confirmButtonText:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044C",cancelButtonText:"\u041E\u0442\u043A\u043B\u043E\u043D\u0438\u0442\u044C"}).then(e=>{e.isConfirmed&&this.$inertia.post(route("admin.students.paid",l))}):Swal.fire({title:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u043E\u043F\u043B\u0430\u0442\u0443?",icon:"error",showCancelButton:!0,confirmButtonColor:"#71DD37",cancelButtonColor:"#adb5bd",confirmButtonText:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044C",cancelButtonText:"\u041E\u0442\u043A\u043B\u043E\u043D\u0438\u0442\u044C"}).then(e=>{e.isConfirmed&&this.$inertia.post(route("admin.students.deletePaid",l))})},search(){this.loading=1;const l=this.clearParams(this.filter);this.$inertia.get(route("admin.students.index"),l)}}},A=t("head",null,[t("title",null,"\u0410\u0434\u043C\u0438\u043D \u043F\u0430\u043D\u0435\u043B\u044C | \u0421\u0442\u0443\u0434\u0435\u043D\u0442\u044B")],-1),E={class:"row mb-2"},F=t("div",{class:"col-sm-6"},[t("h1",{class:"m-0"},"\u0421\u0442\u0443\u0434\u0435\u043D\u0442\u044B")],-1),I={class:"col-sm-6"},U={class:"breadcrumb float-sm-right"},M={class:"breadcrumb-item"},H=["href"],K=t("i",{class:"fas fa-dashboard"},null,-1),q=g(" \u0411\u0430\u0441\u0442\u044B \u0431\u0435\u0442 "),z=[K,q],W=t("li",{class:"breadcrumb-item active"}," \u0421\u0442\u0443\u0434\u0435\u043D\u0442\u044B ",-1),J={class:"buttons d-flex align-items-center"},O=t("i",{class:"fa fa-plus"},null,-1),Q=g(" \u049A\u043E\u0441\u0443 "),R=t("i",{class:"fa fa-trash"},null,-1),X=g(" \u0424\u0438\u043B\u044C\u0442\u0440\u0434\u0456 \u0442\u0430\u0437\u0430\u043B\u0430\u0443 "),Y={key:0,class:"spinner-border text-primary mx-3",role:"status"},Z=t("span",{class:"sr-only"},"Loading...",-1),$=[Z],tt={class:"container-fluid"},st={class:"card"},et={class:"card-body"},nt={class:"row"},ot={class:"col-sm-12"},lt={class:"table table-hover table-bordered table-striped dataTable dtr-inline"},it={role:"row"},at=t("th",null,"\u2116",-1),dt=t("th",null,null,-1),ct=t("th",null,"\u0424\u0418\u041E",-1),ut=t("th",null,"\u041F\u0440\u0435\u0434\u043C\u0435\u0442",-1),_t=t("th",null,"\u0421\u0442\u0430\u0442\u0443\u0441",-1),rt=t("th",null,"\u041F\u0440\u0435\u043F\u043E\u0434\u0430\u0432\u0430\u0442\u0435\u043B\u044C",-1),ht=t("th",null,"\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430",-1),mt=t("th",null,"\u0426\u0435\u043D\u0430",-1),ft={key:0},pt={class:"filters"},vt=t("td",null,null,-1),bt=t("td",null,null,-1),gt=t("td",null,null,-1),kt=t("td",null,null,-1),yt=t("td",null,null,-1),wt=t("td",null,null,-1),Ct={key:0},xt=t("td",null,null,-1),Bt={class:"d-f aj-c"},Pt={class:"d-f j-c"},Lt={class:"paidBlock"},Vt=["onClick"],Gt=["onClick"],Nt=["onClick"],Tt={class:"paid date"},Dt={class:"d-f j-c"},St={class:"tablemask",title:"\u041D\u0430\u043F\u0438\u0441\u0430\u0442\u044C \u043F\u043E Whatsapp"},jt={key:0},At=["onChange","onUpdate:modelValue"],Et=t("option",{value:null,hidden:""}," \u0412\u044B\u0431\u0440\u0430\u0442\u044C ",-1),Ft=t("option",{value:0}," + \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0433\u0440\u0443\u043F\u043F\u0443 ",-1),It=["value"],Ut={key:1},Mt=["onFocusout"],Ht={class:"btn-group btn-group-sm"},Kt=t("i",{class:"fas fa-edit"},null,-1);function qt(l,a,e,zt,r,c){const p=v("Link"),C=v("Pagination"),x=v("AdminLayout");return n(),o(m,null,[A,h(x,null,{breadcrumbs:u(()=>[t("div",E,[F,t("div",I,[t("ol",U,[t("li",M,[t("a",{href:l.route("admin.index")},z,8,H)]),W])])])]),header:u(()=>[t("div",J,[_(h(p,{class:"btn btn-primary mr-2",href:l.route("admin.users.create")},{default:u(()=>[O,Q]),_:1},8,["href"]),[[b,e.user.role_id==1||e.user.role_id==2]]),h(p,{class:"btn btn-danger",href:l.route("admin.students.index")},{default:u(()=>[R,X]),_:1},8,["href"]),r.loading?(n(),o("div",Y,$)):f("",!0)])]),default:u(()=>[t("div",tt,[t("div",st,[t("div",et,[t("div",nt,[t("div",ot,[t("table",lt,[t("thead",null,[t("tr",it,[at,dt,ct,ut,_t,rt,ht,mt,e.groups?(n(),o("th",ft,"\u0413\u0440\u0443\u043F\u043F\u0430")):f("",!0),_(t("th",null,null,512),[[b,e.user.role_id==1||e.user.role_id==2]])]),t("tr",pt,[vt,bt,t("td",null,[_(t("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>r.filter.fio=s),class:"form-control",placeholder:"\u0424\u0418\u041E",onKeyup:a[1]||(a[1]=V((...s)=>c.search&&c.search(...s),["enter"]))},null,544),[[y,r.filter.fio]])]),gt,kt,yt,wt,e.groups?(n(),o("td",Ct)):f("",!0),xt])]),t("tbody",null,[(n(!0),o(m,null,w(e.orders.data,(s,k)=>(n(),o("tr",{class:"odd",key:"order"+s.id},[t("td",null,d(s.from?s.from+k:k+1),1),t("td",Bt,[t("div",{class:"avatar",style:G({backgroundImage:`url(/storage/files/${s.user.avatar})`})},null,4)]),t("td",null,d(s.user.fio),1),t("td",null,d(s.subject?s.subject.name:"\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445"),1),t("td",null,[t("div",Pt,[t("div",Lt,[s.lastEduPaid.status==1?(n(),o("div",{key:0,class:"paid success",onClick:i=>c.setPaid(s.id,0)},"\u041E\u043F\u043B\u0430\u0447\u0435\u043D\u043E",8,Vt)):s.lastEduPaid.status==2?(n(),o("div",{key:1,class:"paid danger",onClick:i=>c.setPaid(s.id,1)},"\u041D\u0435 \u043E\u043F\u043B\u0430\u0447\u0435\u043D\u043E",8,Gt)):(n(),o("div",{key:2,class:"paid black",onClick:i=>c.setPaid(s.id,1)},"\u041F\u0440\u043E\u0441\u0440\u043E\u0447\u0435\u043D\u043E ",8,Nt)),t("div",Tt,d(s.lastEduPaid.date),1)])])]),t("td",null,d(s.teacher.fio),1),t("td",null,[t("div",Dt,[t("div",St,d(s.user.tel_num),1)])]),t("td",null,d(s.price),1),e.user.role_id==3?(n(),o(m,{key:0},[e.groups&&s.group_id!=0?(n(),o("td",jt,[_(t("select",{class:"form-control",onChange:T(i=>c.setNewGroup(s.id,s.group_id),["prevent"]),"onUpdate:modelValue":i=>s.group_id=i,placeholder:"\u0411\u0435\u043B\u0441\u0435\u043D\u0434\u0456"},[Et,Ft,(n(!0),o(m,null,w(e.groups,i=>(n(),o("option",{value:i.id},d(i.name),9,It))),256))],40,At),[[N,s.group_id]])])):(n(),o("td",Ut,[_(t("input",{type:"text",class:"form-control","onUpdate:modelValue":a[2]||(a[2]=i=>r.newGroup=i),onFocusout:i=>c.setNewGroup(s.id)},null,40,Mt),[[y,r.newGroup]])]))],64)):f("",!0),_(t("td",null,[t("div",Ht,[h(p,{href:l.route("admin.users.edit",s),class:"btn btn-primary",title:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"},{default:u(()=>[Kt]),_:2},1032,["href"])])],512),[[b,e.user.role_id==1||e.user.role_id==2]])]))),128))])])])]),h(C,{links:e.orders.links},null,8,["links"])])])])]),_:1})],64)}const Rt=S(j,[["render",qt]]);export{Rt as default};
