import{_ as O,A as y}from"./AdminLayout.678ac4e5.js";import{L as g,H as j,r as w,o as i,a as n,e as V,w as f,F as c,b as e,q as a,f as l,u as _,g as h,s as p,t as m,d as v}from"./app.e85b8d70.js";import{P as x}from"./Pagination.f55796c5.js";import{V as C}from"./ValidationError.1a40e76e.js";const T={components:{AdminLayout:y,Link:g,Pagination:x,ValidationError:C,Head:j},props:["trainTypes","courseTypes","subjects","teachers","shifts","user_id"],data(){return{eduOrder:{subject_id:"",teacher_id:"",shift_id:1,course_type_id:1,train_type_id:1,price:0,start_date:null,end_date:null,hours:null},teacherOrders:this.trainTypes,subjectOrders:null}},methods:{calculatePrice(r=null){if(!this.eduOrder.subject_id)return this.warningText("\u041F\u0440\u0435\u0434\u043C\u0435\u0442 \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D!",null);r?axios.get(`/subject/${this.eduOrder.subject_id}/get-subject-order`).then(s=>{this.subjectOrders=s.data,this.eduOrder.price=this.subjectOrders.find(d=>d.course_type_id==this.eduOrder.course_type_id&&d.shift_id==this.eduOrder.shift_id&&d.train_type_id==this.eduOrder.train_type_id).price}):this.eduOrder.price=this.subjectOrders.find(s=>s.course_type_id==this.eduOrder.course_type_id&&s.shift_id==this.eduOrder.shift_id&&s.train_type_id==this.eduOrder.train_type_id).price},warningText(r,s="\u0412\u0441\u0435 \u043F\u043E\u043B\u044F \u0434\u043E\u043B\u0436\u043D\u044B \u0431\u044B\u0442\u044C \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u044B!"){Swal.fire({title:r,text:s,icon:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"\u041E\u043A\u0435\u0439!"})},add28Days(){if(this.eduOrder.start_date){const r=new Date(this.eduOrder.start_date),s=new Date(r.getTime()+28*24*60*60*1e3);this.eduOrder.end_date=s.toISOString().split("T")[0]}else console.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u0442\u0443")},submit(){this.$inertia.post(route("admin.studentsSubjects.store",this.user_id),this.eduOrder,{onError:()=>console.log("An errors has occurred"),onSuccess:()=>console.log("The new contact has been saved")})},logme(r,s,d){console.log(r+" "+s+" "+d)}}},k=e("head",null,[e("title",null,"\u0410\u0434\u043C\u0438\u043D \u043F\u0430\u043D\u0435\u043B\u044C | \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043F\u0440\u0435\u0434\u043C\u0435\u0442")],-1),P={class:"row mb-2"},q=e("div",{class:"col-sm-6"},[e("h1",{class:"m-0"},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043F\u0440\u0435\u0434\u043C\u0435\u0442")],-1),S={class:"col-sm-6"},U={class:"breadcrumb float-sm-right"},D={class:"breadcrumb-item"},B=["href"],L=e("i",{class:"fas fa-dashboard"},null,-1),A=v(" \u0413\u043B\u0430\u0432\u043D\u0430\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 "),E=[L,A],M={class:"breadcrumb-item"},N=["href"],F=e("i",{class:"fas fa-dashboard"},null,-1),H=v(" \u041F\u0440\u0435\u0434\u043C\u0435\u0442\u044B \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0430 "),I=[F,H],z=e("li",{class:"breadcrumb-item active"}," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043F\u0440\u0435\u0434\u043C\u0435\u0442 ",-1),G={class:"container-fluid"},J={class:"card card-primary"},K={class:"card-body"},Q={class:"row"},R={class:"col-md-4"},W={class:"form-group"},X=e("label",{for:""},"\u041F\u0440\u0435\u0434\u043C\u0435\u0442",-1),Y=e("option",{value:"",disabled:"",selected:"",hidden:""}," \u0412\u044B\u0431\u0440\u0430\u0442\u044C ",-1),Z=["value"],$={class:"col-md-4"},ee={class:"form-group"},te=e("label",{for:""},"\u041F\u0440\u0435\u043F\u043E\u0434\u0430\u0432\u0430\u0442\u0435\u043B\u044C",-1),se=e("option",{value:"",hidden:""}," \u0412\u044B\u0431\u0440\u0430\u0442\u044C ",-1),oe=["value"],re={class:"col-md-4"},de={class:"form-group"},ie=e("label",{for:""},"\u0422\u0438\u043F \u043F\u043E\u0441\u0435\u0449\u0435\u043D\u0438\u044F",-1),ne=e("option",{value:"",hidden:""}," \u0412\u044B\u0431\u0440\u0430\u0442\u044C ",-1),le=["value"],ue={class:"row"},ae={class:"col-md-4"},ce={class:"form-group"},_e=e("label",{for:""},"\u041A\u0443\u0440\u0441",-1),he=e("option",{value:null,hidden:""}," \u0412\u044B\u0431\u0440\u0430\u0442\u044C ",-1),me=["value"],pe={class:"col-md-4"},fe={class:"form-group"},ve=e("label",{for:""},"\u041E\u0431\u0443\u0447\u0435\u043D\u0438\u0435",-1),be=e("option",{value:null,hidden:""}," \u0412\u044B\u0431\u0440\u0430\u0442\u044C ",-1),Oe=["value"],ye={class:"col-md-4"},ge={class:"form-group"},je=e("label",{for:""},"\u0426\u0435\u043D\u0430",-1),we={class:"row"},Ve={class:"col-md-4"},xe={class:"form-group"},Ce=e("label",{for:""},"\u0414\u0430\u0442\u0430 \u043D\u0430\u0447\u0430\u043B\u043E \u043E\u0431\u0443\u0447\u0435\u043D\u0438\u044F",-1),Te={class:"col-md-4"},ke={class:"form-group"},Pe=e("label",{for:""},"\u0414\u0430\u0442\u0430 \u043A\u043E\u043D\u0446\u0430 \u043E\u0431\u0443\u0447\u0435\u043D\u0438\u044F",-1),qe={class:"col-md-4"},Se={class:"form-group"},Ue=e("label",{for:""},"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0447\u0430\u0441\u043E\u0432",-1),De={class:"card-footer"},Be=e("button",{type:"submit",class:"btn btn-primary mr-1"}," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C ",-1);function Le(r,s,d,Ae,o,u){const b=w("AdminLayout");return i(),n(c,null,[k,V(b,null,{breadcrumbs:f(()=>[e("div",P,[q,e("div",S,[e("ol",U,[e("li",D,[e("a",{href:r.route("admin.index")},E,8,B)]),e("li",M,[e("a",{href:r.route("admin.studentsSubjects.index",this.user_id)},I,8,N)]),z])])])]),default:f(()=>[e("div",G,[e("div",J,[e("form",{method:"post",onSubmit:s[15]||(s[15]=a((...t)=>u.submit&&u.submit(...t),["prevent"]))},[e("div",K,[e("div",Q,[e("div",R,[e("div",W,[X,l(e("select",{class:"form-control",onChange:s[0]||(s[0]=a(t=>u.calculatePrice(!0),["prevent"])),"onUpdate:modelValue":s[1]||(s[1]=t=>o.eduOrder.subject_id=t),required:""},[Y,(i(!0),n(c,null,h(d.subjects,t=>(i(),n("option",{key:"subject"+t.id,value:t.id},m(t.name),9,Z))),128))],544),[[_,o.eduOrder.subject_id]])])]),e("div",$,[e("div",ee,[te,l(e("select",{class:"form-control","onUpdate:modelValue":s[2]||(s[2]=t=>o.eduOrder.teacher_id=t),placeholder:"\u0412\u044B\u0431\u0440\u0430\u0442\u044C",required:""},[se,(i(!0),n(c,null,h(d.teachers,t=>(i(),n("option",{key:"teacher"+t.id,value:t.id},m(t.fio),9,oe))),128))],512),[[_,o.eduOrder.teacher_id]])])]),e("div",re,[e("div",de,[ie,l(e("select",{class:"form-control","onUpdate:modelValue":s[3]||(s[3]=t=>o.eduOrder.shift_id=t),onChange:s[4]||(s[4]=a(t=>u.calculatePrice(),["prevent"])),placeholder:"\u0412\u044B\u0431\u0440\u0430\u0442\u044C",required:""},[ne,(i(!0),n(c,null,h(d.shifts,t=>(i(),n("option",{key:"shift"+t.id,value:t.id},m(t.name),9,le))),128))],544),[[_,o.eduOrder.shift_id]])])])]),e("div",ue,[e("div",ae,[e("div",ce,[_e,l(e("select",{class:"form-control",onChange:s[5]||(s[5]=a(t=>u.calculatePrice(),["prevent"])),"onUpdate:modelValue":s[6]||(s[6]=t=>o.eduOrder.course_type_id=t),placeholder:"\u0412\u044B\u0431\u0440\u0430\u0442\u044C",required:""},[he,(i(!0),n(c,null,h(d.courseTypes,t=>(i(),n("option",{key:"courseType"+t.id,value:t.id},m(t.name),9,me))),128))],544),[[_,o.eduOrder.course_type_id]])])]),e("div",pe,[e("div",fe,[ve,l(e("select",{class:"form-control",onChange:s[7]||(s[7]=a(t=>u.calculatePrice(),["prevent"])),"onUpdate:modelValue":s[8]||(s[8]=t=>o.eduOrder.train_type_id=t),placeholder:"\u0412\u044B\u0431\u0440\u0430\u0442\u044C",required:""},[be,(i(!0),n(c,null,h(d.trainTypes,t=>(i(),n("option",{key:"trainType"+t.id,value:t.id},m(t.name),9,Oe))),128))],544),[[_,o.eduOrder.train_type_id]])])]),e("div",ye,[e("div",ge,[je,l(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[9]||(s[9]=t=>o.eduOrder.price=t),name:"eduOrderPrice",placeholder:"\u0426\u0435\u043D\u0430"},null,512),[[p,o.eduOrder.price]])])])]),e("div",we,[e("div",Ve,[e("div",xe,[Ce,l(e("input",{type:"date",class:"form-control",onChange:s[10]||(s[10]=a(t=>u.add28Days(),["prevent"])),"onUpdate:modelValue":s[11]||(s[11]=t=>o.eduOrder.start_date=t),name:"eduOrderPrice",required:""},null,544),[[p,o.eduOrder.start_date]])])]),e("div",Te,[e("div",ke,[Pe,l(e("input",{type:"date",class:"form-control","onUpdate:modelValue":s[12]||(s[12]=t=>o.eduOrder.end_date=t),name:"eduOrderPrice",required:""},null,512),[[p,o.eduOrder.end_date]])])]),e("div",qe,[e("div",Se,[Ue,l(e("input",{type:"number",class:"form-control","onUpdate:modelValue":s[13]||(s[13]=t=>o.eduOrder.hours=t),name:"hours",required:""},null,512),[[p,o.eduOrder.hours]])])])])]),e("div",De,[Be,e("button",{type:"button",class:"btn btn-danger",onClick:s[14]||(s[14]=a(t=>r.back(),["prevent"]))}," \u041D\u0430\u0437\u0430\u0434 ")])],32)])])]),_:1})],64)}const He=O(T,[["render",Le]]);export{He as default};
