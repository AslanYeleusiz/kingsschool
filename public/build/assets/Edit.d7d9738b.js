import{_ as k,A as U}from"./AdminLayout.e1480b28.js";import{L as C,H as T,r as v,o as d,a as r,e as n,w as b,F as u,b as e,k as m,l,v as c,g as f,s as L,p as y,f as g,x as A,t as p,d as w}from"./app.3eb02c40.js";import{P as B}from"./Pagination.a2dbff91.js";import{V as S}from"./ValidationError.4e4457c2.js";const E={components:{AdminLayout:U,Link:C,Pagination:B,ValidationError:S,Head:T},props:["roles","filials","user","auth_user"],data(){return{image:{file:"",preview:""},check_iin:!1,iin:this.user.iin}},methods:{warningText(i,t="\u0411\u0430\u0440\u043B\u044B\u049B \u0431\u0430\u0493\u0430\u043D\u0434\u0430\u0440 \u0442\u043E\u043B\u0442\u044B\u0440\u0443 \u049B\u0430\u0436\u0435\u0442!"){Swal.fire({title:i,text:t,icon:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"\u041E\u043A\u0435\u0439!"})},submit(){if(this.user.iin=this.iin,this.image.file&&(this.user.image=this.image.file),!this.user.role_id)return this.warningText("\u0420\u043E\u043B\u044C \u0442\u0430\u043D\u0434\u0430\u043B\u043C\u0430\u0434\u044B!");if(!this.user.filial_id)return this.warningText("\u0424\u0438\u043B\u0438\u0430\u043B \u0442\u0430\u043D\u0434\u0430\u043B\u043C\u0430\u0434\u044B!");this.user._method="put",this.$inertia.post(route("admin.users.update",this.user.id),this.user,{onError:()=>console.log("An error has occurred"),onSuccess:()=>console.log("The new contact has been saved")})},handleImageUpload(){if(this.image.file=this.$refs.image.files[0],this.image.file){const i=new FileReader;i.onloadend=t=>{this.image.preview=i.result},i.readAsDataURL(this.image.file),this.$refs.image.value=""}else this.user.image="",this.image.file="",this.image.preview=""},checkIin(){this.check_iin=1,axios.get("/admin/check-iin",{params:{iin:this.iin}}).then(i=>{i.data.status==!0&&this.warningText("\u0411\u04B1\u043D\u0434\u0430\u0439 \u0418\u0418\u041D \u0431\u04B1\u0440\u044B\u043D \u0442\u0456\u0440\u043A\u0435\u043B\u0433\u0435\u043D",null),console.log(i.data),this.check_iin=0})}},watch:{iin(i){i.length===12&&this.iin!=this.user.iin&&this.checkIin()}}},D=e("head",null,[e("title",null,"\u0410\u0434\u043C\u0438\u043D \u043F\u0430\u043D\u0435\u043B\u044C | \u049A\u043E\u043B\u0434\u0430\u043D\u0443\u0448\u044B\u043D\u044B \u04E9\u0437\u0433\u0435\u0440\u0442\u0443")],-1),I={class:"row mb-2"},M=e("div",{class:"col-sm-6"},[e("h1",{class:"m-0"},"\u049A\u043E\u043B\u0434\u0430\u043D\u0443\u0448\u044B\u043D\u044B \u04E9\u0437\u0433\u0435\u0440\u0442\u0443")],-1),N={class:"col-sm-6"},F={class:"breadcrumb float-sm-right"},q={class:"breadcrumb-item"},H=["href"],P=e("i",{class:"fas fa-dashboard"},null,-1),R=w(" \u0411\u0430\u0441\u0442\u044B \u0431\u0435\u0442 "),j=[P,R],z={class:"breadcrumb-item"},G=["href"],J=e("i",{class:"fas fa-dashboard"},null,-1),K=w(" \u049A\u043E\u043B\u0434\u0430\u043D\u0443\u0448\u044B\u043B\u0430\u0440 \u0442\u0456\u0437\u0456\u043C\u0456 "),Q=[J,K],W=e("li",{class:"breadcrumb-item active"}," \u049A\u043E\u043B\u0434\u0430\u043D\u0443\u0448\u044B\u043D\u044B \u04E9\u0437\u0433\u0435\u0440\u0442\u0443 ",-1),X={class:"container-fluid"},Y={class:"card card-primary"},Z={class:"card-body"},O={class:"row"},$={class:"col-md-4"},ee={class:"form-group"},se=e("label",{for:""},"\u0418\u0418\u041D",-1),te={class:"row"},oe={class:"col-md-4"},ie={class:"form-group"},le=e("label",{for:""},"\u0424\u0430\u043C\u0438\u043B\u0438\u044F",-1),ne={class:"col-md-4"},ae={class:"form-group"},de=e("label",{for:""},"\u0418\u043C\u044F",-1),re={class:"row"},ce={class:"col-md-4"},_e={class:"form-group"},ue=e("label",{for:""},"\u0414\u0430\u0442\u0430 \u0440\u043E\u0436\u0434\u0435\u043D\u044C\u044F",-1),me={class:"col-md-4"},he={class:"form-group"},fe=e("label",{for:""},"\u0422\u0435\u043B\u0435\u0444\u043E\u043D",-1),ge={key:0,class:"col-md-4"},pe={class:"form-group"},ve=e("label",{for:""},"\u0422\u0435\u043B\u0435\u0444\u043E\u043D \u0440\u043E\u0434\u0438\u0442\u0435\u043B\u044F",-1),be={class:"form-group file-upload"},ye=e("label",{for:""},"\u0421\u0443\u0440\u0435\u0442",-1),we={class:"ml-2"},xe=["src"],Ve=["src"],ke={class:"file-input",style:{"margin-right":"10px"}},Ue=e("label",{for:"image"}," \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C ",-1),Ce={class:"row"},Te={class:"col-md-4"},Le={class:"form-group"},Ae=e("label",{for:""},"\u0410\u0439\u0434\u0438 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438",-1),Be={class:"row"},Se={class:"col-md-4"},Ee={class:"form-group"},De=e("label",{for:""},"\u0420\u043E\u043B\u044C",-1),Ie=e("option",{value:null,hidden:""}," \u0420\u043E\u043B\u044C \u0442\u0430\u04A3\u0434\u0430\u04A3\u044B\u0437 ",-1),Me=["value"],Ne={class:"col-md-4"},Fe={class:"form-group"},qe=e("label",{for:""},"\u0424\u0438\u043B\u043B\u0438\u0430\u043B",-1),He=e("option",{value:null,hidden:""}," \u0424\u0438\u043B\u043B\u0438\u0430\u043B \u0442\u0430\u04A3\u0434\u0430\u04A3\u044B\u0437 ",-1),Pe=["value"],Re={class:"col-md-4"},je={class:"form-group"},ze=e("label",{for:""},"\u049A\u04B1\u043F\u0438\u044F \u0441\u04E9\u0437",-1),Ge=["type"],Je={class:"row"},Ke={class:"col-md-5"},Qe={class:"form-group"},We=e("label",{for:""},"\u0414\u0430\u0442\u0430 \u043D\u0430\u0447\u0430\u043B\u0430 \u043E\u0431\u0443\u0447\u0435\u043D\u0438\u044F",-1),Xe={class:"row"},Ye={class:"col-md-5"},Ze={class:"form-group"},Oe=e("label",{for:""},"\u0417\u0430\u0440\u043F\u043B\u0430\u0442\u0430",-1),$e={class:"input-group mt-3"},es={class:"input-group-prepend"},ss={class:"input-group-text",id:"basic-addon3"},ts=["onUpdate:modelValue"],os=e("div",{class:"input-group-append"},[e("span",{class:"input-group-text"},"%")],-1),is={class:"card-footer"},ls=e("button",{type:"submit",class:"btn btn-primary mr-1"}," \u0421\u0430\u049B\u0442\u0430\u0443 ",-1);function ns(i,t,o,as,_,h){const a=v("validation-error"),x=v("AdminLayout");return d(),r(u,null,[D,n(x,null,{breadcrumbs:b(()=>[e("div",I,[M,e("div",N,[e("ol",F,[e("li",q,[e("a",{href:i.route("admin.index")},j,8,H)]),e("li",z,[e("a",{href:i.route("admin.users.index")},Q,8,G)]),W])])])]),default:b(()=>[e("div",X,[e("div",Y,[e("form",{method:"post",onSubmit:t[15]||(t[15]=m((...s)=>h.submit&&h.submit(...s),["prevent"]))},[e("div",Z,[e("div",O,[e("div",$,[e("div",ee,[se,l(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=s=>_.iin=s),name:"iin",placeholder:"\u0418\u0418\u041D",maxlength:"12"},null,512),[[c,_.iin]]),n(a,{field:"iin"})])])]),e("div",te,[e("div",oe,[e("div",ie,[le,l(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=s=>o.user.s_name=s),name:"s_name",placeholder:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"},null,512),[[c,o.user.s_name]]),n(a,{field:"s_name"})])]),e("div",ne,[e("div",ae,[de,l(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=s=>o.user.name=s),name:"name",placeholder:"\u0418\u043C\u044F"},null,512),[[c,o.user.name]]),n(a,{field:"name"})])])]),e("div",re,[e("div",ce,[e("div",_e,[ue,l(e("input",{type:"date",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=s=>o.user.birthday=s),name:"birthday",placeholder:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"},null,512),[[c,o.user.birthday]]),n(a,{field:"birthday"})])]),e("div",me,[e("div",he,[fe,l(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=s=>o.user.tel_num=s),name:"tel_num",placeholder:"\u0418\u043C\u044F"},null,512),[[c,o.user.tel_num]]),n(a,{field:"tel_num"})])]),o.user.role_id==4?(d(),r("div",ge,[e("div",pe,[ve,l(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=s=>o.user.tel_num_family=s),name:"tel_num_family",placeholder:"\u0422\u0435\u043B\u0435\u0444\u043E\u043D \u0440\u043E\u0434\u0438\u0442\u0435\u043B\u044F"},null,512),[[c,o.user.tel_num_family]]),n(a,{field:"tel_num_family"})])])):f("",!0)]),e("div",be,[ye,e("div",we,[o.user.avatar&&!_.image.file?(d(),r("img",{key:0,src:i.route("index")+"/storage/files/"+o.user.avatar,height:"300",alt:"image",style:{"padding-bottom":"10px"}},null,8,xe)):f("",!0),l(e("img",{src:_.image.preview,height:"300",style:{"padding-bottom":"10px"}},null,8,Ve),[[L,_.image.preview]]),e("div",ke,[e("input",{type:"file",hidden:"",name:"image",onChange:t[6]||(t[6]=s=>h.handleImageUpload()),ref:"image",accept:"image/jpeg,image/png",class:"file",id:"image"},null,544),Ue])]),n(a,{field:"image"})]),e("div",Ce,[e("div",Te,[e("div",Le,[Ae,l(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=s=>o.user.card_id=s),name:"card_id",placeholder:"\u0410\u0439\u0434\u0438"},null,512),[[c,o.user.card_id]]),n(a,{field:"card_id"})])])]),e("div",Be,[e("div",Se,[e("div",Ee,[De,l(e("select",{class:"form-control",onChange:t[8]||(t[8]=m((...s)=>i.search&&i.search(...s),["prevent"])),"onUpdate:modelValue":t[9]||(t[9]=s=>o.user.role_id=s),placeholder:"\u0411\u0435\u043B\u0441\u0435\u043D\u0434\u0456"},[Ie,(d(!0),r(u,null,g(o.roles,s=>(d(),r("option",{key:"role"+s.id,value:s.id},p(s.name),9,Me))),128))],544),[[y,o.user.role_id]]),n(a,{field:"role_id"})])]),e("div",Ne,[e("div",Fe,[qe,l(e("select",{class:"form-control",onChange:t[10]||(t[10]=m((...s)=>i.search&&i.search(...s),["prevent"])),"onUpdate:modelValue":t[11]||(t[11]=s=>o.user.filial_id=s),placeholder:"\u0411\u0435\u043B\u0441\u0435\u043D\u0434\u0456"},[He,(d(!0),r(u,null,g(o.filials,s=>(d(),r("option",{key:"filial"+s.id,value:s.id},p(s.name),9,Pe))),128))],544),[[y,o.user.filial_id]]),n(a,{field:"filial_id"})])]),e("div",Re,[e("div",je,[ze,l(e("input",{type:o.auth_user.role_id!=1?"password":"text",class:"form-control","onUpdate:modelValue":t[12]||(t[12]=s=>o.user.real_password=s),name:"real_password",placeholder:"\u049A\u04B1\u043F\u0438\u044F \u0441\u04E9\u0437"},null,8,Ge),[[A,o.user.real_password]]),n(a,{field:"real_password"})])])]),o.user.role_id==3?(d(),r(u,{key:0},[e("div",Je,[e("div",Ke,[e("div",Qe,[We,l(e("input",{type:"date",class:"form-control","onUpdate:modelValue":t[13]||(t[13]=s=>o.user.start_edu_date=s),required:""},null,512),[[c,o.user.start_edu_date]])])])]),e("div",Xe,[e("div",Ye,[e("div",Ze,[Oe,(d(!0),r(u,null,g(o.user.salary_orders,s=>(d(),r("div",$e,[e("div",es,[e("span",ss,p(s.train_type.name),1)]),l(e("input",{type:"number",class:"form-control","onUpdate:modelValue":V=>s.percent=V,"aria-describedby":"basic-addon3",style:{"text-align":"right"},required:""},null,8,ts),[[c,s.percent]]),os]))),256))])])])],64)):f("",!0),e("div",is,[ls,e("button",{type:"button",class:"btn btn-danger",onClick:t[14]||(t[14]=m(s=>i.back(),["prevent"]))}," \u0410\u0440\u0442\u049B\u0430 ")])])],32)])])]),_:1})],64)}const us=k(E,[["render",ns]]);export{us as default};
