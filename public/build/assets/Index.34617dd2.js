import{A as E}from"./AdminLayout.ce7dabf6.js";import{L as G,H as L,a as C,o as e,c as n,f as k,w as m,F as v,d as t,b as T,h as _,t as d,m as f,u as w,v as B,p as A,g as b,e as P,q as x,s as D,l as g}from"./app.3eafe5ec.js";import{P as V}from"./Pagination.40f82a73.js";import{_ as N}from"./_plugin-vue_export-helper.cdc0426e.js";const I={components:{AdminLayout:E,Link:G,Pagination:V,Head:L},props:["orders","groups","user"],data(){return{filter:{name:route().params.name?route().params.name:null},loading:0,newGroup:"",allPrice:0,newAllPrice:0}},methods:{calculatePrice(o,i){return this.orders.data.reduce((h,r)=>o==2&&r.lastEduPaid.status==3||r.lastEduPaid&&r.lastEduPaid.status==o?h+(i?r.newPrice:r.price):h,0)},calculateAllPrice(o){return this.orders.data.reduce((l,h)=>l+(o?h.newPrice:h.price),0)},checkStudents(){return this.user.role_id==1?!1:this.orders.data.every(o=>o.group_id!==null)==!1},setNewGroup(o,i=null){this.$inertia.put(route("admin.students.update",o),{name:this.newGroup,groupId:i})},setGroup(o,i=null){this.orders.data.find(l=>l.id==o).group_id==0?this.newGroup="":this.setNewGroup(o,i)},setPaid(o,i){i?Swal.fire({title:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043E\u043F\u043B\u0430\u0442\u0443",icon:"success",showCancelButton:!0,confirmButtonColor:"#71DD37",cancelButtonColor:"#adb5bd",confirmButtonText:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044C",cancelButtonText:"\u041E\u0442\u043A\u043B\u043E\u043D\u0438\u0442\u044C"}).then(l=>{l.isConfirmed&&this.$inertia.post(route("admin.students.paid",o))}):Swal.fire({title:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u043E\u043F\u043B\u0430\u0442\u0443?",icon:"error",showCancelButton:!0,confirmButtonColor:"#71DD37",cancelButtonColor:"#adb5bd",confirmButtonText:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044C",cancelButtonText:"\u041E\u0442\u043A\u043B\u043E\u043D\u0438\u0442\u044C"}).then(l=>{l.isConfirmed&&this.$inertia.post(route("admin.students.deletePaid",o))})},search(){this.loading=1;const o=this.clearParams(this.filter);this.$inertia.get(route("admin.students.index"),o)},deleteData(o){Swal.fire({title:"\u0416\u043E\u044E\u0493\u0430 \u0441\u0435\u043D\u0456\u043C\u0434\u0456\u0441\u0456\u0437 \u0431\u0435?",text:"\u049A\u0430\u0439\u0442\u044B\u043F \u049B\u0430\u043B\u043F\u044B\u043D\u0430 \u043A\u0435\u043B\u043C\u0435\u0443\u0456 \u043C\u04AF\u043C\u043A\u0456\u043D!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u0418\u04D9, \u0436\u043E\u044F\u043C\u044B\u043D!",cancelButtonText:"\u0416\u043E\u049B"}).then(i=>{i.isConfirmed&&this.$inertia.delete(route("admin.groups.destroy",o))})},deleteDataAtGroup(o){Swal.fire({title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0443\u0447\u0435\u043D\u0438\u043A\u0430 \u0438\u0437 \u0433\u0440\u0443\u043F\u043F\u044B?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u0414\u0430!",cancelButtonText:"\u041D\u0435\u0442"}).then(i=>{i.isConfirmed&&this.$inertia.delete(route("admin.groups.destroyOrder",o))})}}},F=t("head",null,[t("title",null,"\u0410\u0434\u043C\u0438\u043D \u043F\u0430\u043D\u0435\u043B\u044C | \u0421\u0442\u0443\u0434\u0435\u043D\u0442\u044B")],-1),U={class:"row mb-2"},M=t("div",{class:"col-sm-6"},[t("h1",{class:"m-0"},"\u0421\u0442\u0443\u0434\u0435\u043D\u0442\u044B")],-1),H={class:"col-sm-6"},K={class:"breadcrumb float-sm-right"},q={class:"breadcrumb-item"},z=["href"],O=t("i",{class:"fas fa-dashboard"},null,-1),W=P(" \u0411\u0430\u0441\u0442\u044B \u0431\u0435\u0442 "),J=[O,W],Q=t("li",{class:"breadcrumb-item active"}," \u0421\u0442\u0443\u0434\u0435\u043D\u0442\u044B ",-1),R={class:"buttons d-flex align-items-center"},X=t("i",{class:"fa fa-plus"},null,-1),Y=P(" \u049A\u043E\u0441\u0443 "),Z=t("i",{class:"fa fa-trash"},null,-1),$=P(" \u0424\u0438\u043B\u044C\u0442\u0440\u0434\u0456 \u0442\u0430\u0437\u0430\u043B\u0430\u0443 "),tt={key:1,class:"ml-2 badge badge-danger"},st={class:"container-fluid"},et={class:"card"},lt={class:"card-body"},nt={class:"row"},ot={class:"col-sm-12"},dt={class:"table table-hover table-bordered table-striped dataTable dtr-inline"},it={role:"row"},at=t("th",null,"\u2116",-1),ct=t("th",null,null,-1),ut=t("th",null,"\u0424\u0418\u041E",-1),_t=t("th",null,"\u041F\u0440\u0435\u0434\u043C\u0435\u0442",-1),rt=t("th",null,"\u0421\u0442\u0430\u0442\u0443\u0441",-1),ht={key:0},vt=t("th",null,"\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430",-1),mt={key:1},ft={key:2},kt={class:"filters"},bt=t("td",null,null,-1),gt=t("td",null,null,-1),pt=t("td",null,null,-1),yt={key:0},Ct=t("td",null,null,-1),Pt={key:1},wt={key:2},Bt=t("td",null,null,-1),xt={class:"d-f aj-c"},jt={class:"d-f j-c"},St={class:"paidBlock"},Et=["onClick"],Gt=["onClick"],Lt=["onClick"],Tt={class:"paid date"},At={key:0},Dt={class:"d-f j-c"},Vt={class:"tablemask",title:"\u041D\u0430\u043F\u0438\u0441\u0430\u0442\u044C \u043F\u043E Whatsapp"},Nt={key:1},It={class:"d-f j-c"},Ft={class:"paidBlock"},Ut={key:0,class:"paid success no-hover"},Mt=["onClick"],Ht=["onClick"],Kt={class:"paid date no-hover"},qt={key:0},zt=["onChange","onUpdate:modelValue"],Ot=t("option",{value:null,hidden:""}," \u0412\u044B\u0431\u0440\u0430\u0442\u044C ",-1),Wt=t("option",{value:0}," + \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0433\u0440\u0443\u043F\u043F\u0443 ",-1),Jt=["value"],Qt={key:1},Rt=["onFocusout"],Xt={class:"btn-group btn-group-sm"},Yt=t("i",{class:"fas fa-edit"},null,-1),Zt={class:"odd"},$t=t("td",null,null,-1),ts=t("td",null,null,-1),ss=t("td",null,null,-1),es=t("td",null,null,-1),ls=t("td",null,null,-1),ns=t("td",null,null,-1),os=t("td",null,"\u041E\u043F\u043B\u0430\u0447\u0435\u043D\u043E",-1),ds={class:"d-f j-c"},is={class:"paidBlock"},as={class:"paid success no-hover"},cs={class:"paid date no-hover"},us=t("td",null,null,-1),_s=t("td",null,null,-1),rs={class:"odd"},hs=t("td",null,null,-1),vs=t("td",null,null,-1),ms=t("td",null,null,-1),fs=t("td",null,null,-1),ks=t("td",null,null,-1),bs=t("td",null,null,-1),gs=t("td",null,"\u041D\u0435 \u043E\u043F\u043B\u0430\u0447\u0435\u043D\u043E",-1),ps={class:"d-f j-c"},ys={class:"paidBlock"},Cs={class:"paid pd danger no-hover"},Ps={class:"paid date no-hover"},ws=t("td",null,null,-1),Bs=t("td",null,null,-1),xs={class:"odd"},js=t("td",null,null,-1),Ss=t("td",null,null,-1),Es=t("td",null,null,-1),Gs=t("td",null,null,-1),Ls=t("td",null,null,-1),Ts=t("td",null,null,-1),As=t("td",null,"\u041E\u0431\u0449\u0435\u0435",-1),Ds={class:"d-f j-c"},Vs={class:"paidBlock"},Ns={class:"paid pd danger no-hover"},Is={class:"paid date no-hover"},Fs=t("td",null,null,-1),Us=t("td",null,null,-1),Ms={key:0,class:"container-fluid"},Hs={class:"card"},Ks={class:"card-body"},qs=t("h2",{class:"mb-3"},"\u0413\u0440\u0443\u043F\u043F\u044B",-1),zs={class:"row"},Os={class:"col-sm-12"},Ws=["data-target"],Js={class:"d-flex center"},Qs={class:"d-flex gap-20"},Rs={class:"mr-3 modul_name"},Xs=["onClick"],Ys=t("i",{class:"fas fa-times"},null,-1),Zs=[Ys],$s=t("span",{class:"arrow mr-3"},"\u25BC",-1),te=["id"],se={class:"table table-hover table-bordered table-striped dataTable dtr-inline"},ee=t("thead",null,[t("tr",{role:"row"},[t("th",null,"\u2116"),t("th"),t("th",null,"\u0424\u0418\u041E"),t("th",null,"\u041F\u0440\u0435\u0434\u043C\u0435\u0442"),t("th",null,"\u0421\u0442\u0430\u0442\u0443\u0441"),t("td")])],-1),le={class:"d-f aj-c"},ne={class:"d-f j-c"},oe={class:"paidBlock"},de=["onClick"],ie=["onClick"],ae=["onClick"],ce={class:"paid date"},ue={class:"d-f j-b"},_e=t("div",null,null,-1),re=["onClick"],he=t("i",{class:"fas fa-times"},null,-1),ve=[he];function me(o,i,l,h,r,a){const p=C("Link"),j=C("Pagination"),S=C("AdminLayout");return e(),n(v,null,[F,k(S,null,{breadcrumbs:m(()=>[t("div",U,[M,t("div",H,[t("ol",K,[t("li",q,[t("a",{href:o.route("admin.index")},J,8,z)]),Q])])])]),header:m(()=>[t("div",R,[l.user.role_id==1||l.user.role_id==2?(e(),T(p,{key:0,class:"btn btn-primary mr-2",href:o.route("admin.users.create")},{default:m(()=>[X,Y]),_:1},8,["href"])):_("",!0),k(p,{class:"btn btn-danger",href:o.route("admin.students.index")},{default:m(()=>[Z,$]),_:1},8,["href"]),a.checkStudents()?(e(),n("div",tt,[t("h3",null,d(l.groups?"\u0412\u0430\u0448\u0438":"\u041D\u0435\u043A\u043E\u0442\u043E\u0440\u044B\u0435")+" \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u044B \u043D\u0435 \u0440\u0430\u0441\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u044B \u043F\u043E \u0433\u0440\u0443\u043F\u043F\u0430\u043C",1)])):_("",!0)])]),default:m(()=>[t("div",st,[t("div",et,[t("div",lt,[t("div",nt,[t("div",ot,[t("table",dt,[t("thead",null,[t("tr",it,[at,ct,ut,_t,rt,l.user.role_id<3?(e(),n("th",ht,"\u041F\u0440\u0435\u043F\u043E\u0434\u0430\u0432\u0430\u0442\u0435\u043B\u044C")):_("",!0),vt,l.user.role_id<3?(e(),n("th",mt,"\u0426\u0435\u043D\u0430")):_("",!0),l.groups?(e(),n("th",ft,"\u0413\u0440\u0443\u043F\u043F\u0430")):_("",!0),f(t("th",null,null,512),[[w,l.user.role_id==1||l.user.role_id==2]])]),t("tr",kt,[bt,gt,t("td",null,[f(t("input",{"onUpdate:modelValue":i[0]||(i[0]=s=>r.filter.fio=s),class:"form-control",placeholder:"\u0424\u0418\u041E",onKeyup:i[1]||(i[1]=A((...s)=>a.search&&a.search(...s),["enter"]))},null,544),[[B,r.filter.fio]])]),pt,l.user.role_id<3?(e(),n("td",yt)):_("",!0),Ct,l.user.role_id<3?(e(),n("td",Pt)):_("",!0),l.groups?(e(),n("td",wt)):_("",!0),Bt])]),t("tbody",null,[(e(!0),n(v,null,b(l.orders.data,(s,c)=>(e(),n("tr",{class:"odd",key:"order"+s.id},[t("td",null,d(s.from?s.from+c:c+1),1),t("td",xt,[t("div",{class:"avatar",style:x({backgroundImage:`url(/storage/files/${s.user.avatar})`})},null,4)]),t("td",null,d(s.user.fio),1),t("td",null,d(s.subject?s.subject.name:"\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445"),1),t("td",null,[t("div",jt,[t("div",St,[s.lastEduPaid.status==1?(e(),n("div",{key:0,class:"paid success",onClick:u=>a.setPaid(s.id,0)},"\u041E\u043F\u043B\u0430\u0447\u0435\u043D\u043E",8,Et)):s.lastEduPaid.status==2?(e(),n("div",{key:1,class:"paid danger",onClick:u=>a.setPaid(s.id,1)},"\u041D\u0435 \u043E\u043F\u043B\u0430\u0447\u0435\u043D\u043E",8,Gt)):(e(),n("div",{key:2,class:"paid black",onClick:u=>a.setPaid(s.id,1)},"\u041F\u0440\u043E\u0441\u0440\u043E\u0447\u0435\u043D\u043E ",8,Lt)),t("div",Tt,d(s.lastEduPaid.date),1)])])]),l.user.role_id<3?(e(),n("td",At,d(s.teacher.fio),1)):_("",!0),t("td",null,[t("div",Dt,[t("div",Vt,d(s.user.tel_num),1)])]),l.user.role_id<3?(e(),n("td",Nt,[t("div",It,[t("div",Ft,[s.lastEduPaid.status==1?(e(),n("div",Ut,d(s.price.toLocaleString()),1)):s.lastEduPaid.status==2?(e(),n("div",{key:1,class:"paid pd danger no-hover",onClick:u=>a.setPaid(s.id,1)},d(s.price.toLocaleString()),9,Mt)):(e(),n("div",{key:2,class:"paid pd black no-hover",onClick:u=>a.setPaid(s.id,1)},d(s.price.toLocaleString()),9,Ht)),t("div",Kt,d(s.newPrice.toLocaleString()),1)])])])):_("",!0),l.groups?(e(),n(v,{key:2},[l.groups&&s.group_id!=0?(e(),n("td",qt,[f(t("select",{class:"form-control",onChange:g(u=>a.setGroup(s.id,s.group_id),["prevent"]),"onUpdate:modelValue":u=>s.group_id=u,placeholder:"\u0411\u0435\u043B\u0441\u0435\u043D\u0434\u0456"},[Ot,Wt,(e(!0),n(v,null,b(l.groups,u=>(e(),n("option",{value:u.id},d(u.name),9,Jt))),256))],40,zt),[[D,s.group_id]])])):(e(),n("td",Qt,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":i[2]||(i[2]=u=>r.newGroup=u),onFocusout:u=>a.setNewGroup(s.id)},null,40,Rt),[[B,r.newGroup]])]))],64)):_("",!0),f(t("td",null,[t("div",Xt,[k(p,{href:o.route("admin.users.edit",s),class:"btn btn-primary",title:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"},{default:m(()=>[Yt]),_:2},1032,["href"])])],512),[[w,l.user.role_id==1||l.user.role_id==2]])]))),128)),t("tr",Zt,[$t,ts,ss,es,ls,ns,os,t("td",null,[t("div",ds,[t("div",is,[t("div",as,d(a.calculatePrice(1,0)),1),t("div",cs,d(a.calculatePrice(1,1)),1)])])]),us,_s]),t("tr",rs,[hs,vs,ms,fs,ks,bs,gs,t("td",null,[t("div",ps,[t("div",ys,[t("div",Cs,d(a.calculatePrice(2,0)),1),t("div",Ps,d(a.calculatePrice(2,1)),1)])])]),ws,Bs]),t("tr",xs,[js,Ss,Es,Gs,Ls,Ts,As,t("td",null,[t("div",Ds,[t("div",Vs,[t("div",Ns,d(a.calculateAllPrice(0)),1),t("div",Is,d(a.calculateAllPrice(1)),1)])])]),Fs,Us])])])])]),k(j,{links:l.orders.links},null,8,["links"])])])]),l.groups?(e(),n("div",Ms,[t("div",Hs,[t("div",Ks,[qs,t("div",zs,[t("div",Os,[(e(!0),n(v,null,b(l.groups,s=>(e(),n("div",{class:"module",key:"group"+s.id},[t("div",{class:"module-header","data-toggle":"collapse","data-target":"#moduleContent_"+s.id},[t("div",Js,[t("div",Qs,[t("h4",Rs,d(s.name),1),t("div",{class:"btn-group btn-group-sm",onClick:i[3]||(i[3]=g(()=>{},["stop"]))},[t("button",{onClick:g(c=>a.deleteData(s.id,!0),["prevent"]),class:"btn btn-danger",title:"\u0416\u043E\u044E"},Zs,8,Xs)])]),$s])],8,Ws),t("div",{id:"moduleContent_"+s.id,class:"module-content collapse show"},[t("table",se,[ee,t("tbody",null,[(e(!0),n(v,null,b(l.orders.data,(c,u)=>(e(),n("tr",{class:"odd",key:"grouporder"+c.id},[c.group_id==s.id?(e(),n(v,{key:0},[t("td",null,d(c.from?c.from+u:u+1),1),t("td",le,[t("div",{class:"avatar",style:x({backgroundImage:`url(/storage/files/${c.user.avatar})`})},null,4)]),t("td",null,d(c.user.fio),1),t("td",null,d(c.subject?c.subject.name:"\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445"),1),t("td",null,[t("div",ne,[t("div",oe,[c.lastEduPaid.status==1?(e(),n("div",{key:0,class:"paid success",onClick:y=>a.setPaid(c.id,0)},"\u041E\u043F\u043B\u0430\u0447\u0435\u043D\u043E",8,de)):c.lastEduPaid.status==2?(e(),n("div",{key:1,class:"paid danger",onClick:y=>a.setPaid(c.id,1)},"\u041D\u0435 \u043E\u043F\u043B\u0430\u0447\u0435\u043D\u043E",8,ie)):(e(),n("div",{key:2,class:"paid black",onClick:y=>a.setPaid(c.id,1)},"\u041F\u0440\u043E\u0441\u0440\u043E\u0447\u0435\u043D\u043E ",8,ae)),t("div",ce,d(c.lastEduPaid.date),1)])])]),t("td",null,[t("div",ue,[_e,t("button",{onClick:g(y=>a.deleteDataAtGroup(c.id),["prevent"]),class:"btn btn-danger",title:"\u0416\u043E\u044E"},ve,8,re)])])],64)):_("",!0)]))),128))])])],8,te)]))),128))])])])])])):_("",!0)]),_:1})],64)}const pe=N(I,[["render",me]]);export{pe as default};
