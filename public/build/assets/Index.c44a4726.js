import{_ as x,A as D}from"./AdminLayout.b1808670.js";import{L as S,r as p,o as a,c as f,w as k,b as t,a as n,t as r,F as u,f as v,g as m,d as b,n as L,q as B,s as Y,m as _}from"./app.61c0b581.js";const T={props:["user"],components:{AdminLayout:D,Link:S},data(){var s;return{days:["\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A","\u0412\u0442\u043E\u0440\u043D\u0438\u043A","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041F\u044F\u0442\u043D\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043E\u0442\u0430","\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u0438\u0435"],currentDate:(s=route().params.date)!=null?s:"",schedules:null,startweekdate:null,endweekdate:null}},mounted(){this.$nextTick(()=>{console.log("Next tick executed");const i=$(this.$refs.calendar);moment.updateLocale("en",{week:{dow:1}}),i.datetimepicker({locale:"en",format:"YYYY-MM-DD",inline:!0}),i.on("change.datetimepicker",l=>{this.toggleCollapse(l.date.format("YYYY-MM-DD"))})});var s=new Date,d=s.getDay(),o=d===0?7:d;console.log(o),this.toggleCollapse(s.toISOString().slice(0,10))},methods:{changeStatus(s,d){axios.post(route("admin.schedule.setStatus",s),{status:d}).then(o=>{console.log(o)})},toggleCollapse(s){console.log(s),this.currentDate=s;let o=new URLSearchParams(window.location.search).get("teacher_id");axios.get(route("admin.schedule.getSchedule"),{params:{date:this.currentDate,teacher_id:o!=null?o:null}}).then(i=>{this.schedules=i.data.schedules,this.startweekdate=i.data.startweekdate,this.endweekdate=i.data.endweekdate})},getStatusText(s){switch(s){case 0:return"\u0423\u0440\u043E\u043A \u043D\u0435 \u043D\u0430\u0447\u0430\u043B\u0441\u044F";case 1:return"\u0423\u0440\u043E\u043A \u043F\u0440\u043E\u0432\u0435\u0434\u0451\u043D";case 2:return"\u0423\u0440\u043E\u043A \u043D\u0435 \u043F\u0440\u043E\u0432\u0435\u0434\u0451\u043D";case 3:return"\u0415\u0449\u0451 \u043D\u0435 \u043F\u0440\u0438\u0448\u0435\u043B"}},deleteData(s){Swal.fire({title:"\u0416\u043E\u044E\u0493\u0430 \u0441\u0435\u043D\u0456\u043C\u0434\u0456\u0441\u0456\u0437 \u0431\u0435",text:"\u049A\u0430\u0439\u0442\u044B\u043F \u049B\u0430\u043B\u043F\u044B\u043D\u0430 \u043A\u0435\u043B\u043C\u0435\u0443\u0456 \u043C\u04AF\u043C\u043A\u0456\u043D!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u0418\u04D9, \u0436\u043E\u044F\u043C\u044B\u043D!",cancelButtonText:"\u0411\u043E\u043B\u0434\u044B\u0440\u043C\u0430\u0443"}).then(d=>{d.isConfirmed&&this.$inertia.delete(route("admin.schedule.destroy",s))})}}},M={class:"card"},V=t("div",{class:"card-header border-0"},[t("h3",{class:"card-title"},[t("i",{class:"far fa-calendar-alt"}),b(" Calendar ")])],-1),A={class:"card-body pt-0"},N={ref:"calendar"},O={key:0,class:"container-fluid"},P={class:"card"},U={class:"card-body"},j={class:"mb-3"},F={class:"row"},I={class:"col-sm-12"},W={class:"table table-hover"},q={"data-widget":"expandable-table","aria-expanded":"false"},z={class:"d-flex justify-content-between"},E=b(" \u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C "),R={class:"expandable-body d-none"},G={class:"p-0",style:{}},H={class:"table mt-2 mb-3 table-hover table-bordered table-striped dataTable dtr-inline"},J={key:0},K={key:1},Q=["onChange","onUpdate:modelValue"],X=t("option",{value:0}," \u0423\u0440\u043E\u043A \u043D\u0435 \u043D\u0430\u0447\u0430\u043B\u0441\u044F ",-1),Z=t("option",{value:1}," \u0423\u0440\u043E\u043A \u043F\u0440\u043E\u0432\u0435\u0434\u0451\u043D ",-1),tt=t("option",{value:2}," \u0423\u0440\u043E\u043A \u043D\u0435 \u043F\u0440\u043E\u0432\u0435\u0434\u0451\u043D ",-1),et=t("option",{value:3}," \u0415\u0449\u0451 \u043D\u0435 \u043F\u0440\u0438\u0448\u0435\u043B ",-1),st=[X,Z,tt,et],at={class:"btn-group btn-group-sm"},ot=["onClick"],nt=t("i",{class:"fas fa-trash"},null,-1),dt=[nt],lt=["onClick"],it=t("i",{class:"fas fa-edit"},null,-1),rt=[it],ct=["onClick"],ut=t("i",{class:"fas fa-check"},null,-1),_t=[ut];function ht(s,d,o,i,l,h){const y=p("Link"),w=p("AdminLayout");return a(),f(w,null,{default:k(()=>[t("div",M,[V,t("div",A,[t("div",N,null,512)])]),l.schedules?(a(),n("div",O,[t("div",P,[t("div",U,[t("h3",j,r(l.startweekdate+"-"+l.endweekdate),1),t("div",F,[t("div",I,[t("table",W,[t("tbody",null,[(a(!0),n(u,null,v(l.days,(C,g)=>(a(),n(u,null,[t("tr",q,[t("td",null,[t("div",z,[b(r(C)+" ",1),o.user.role_id==1||o.user.role_id==2||o.user.role_id==3?(a(),f(y,{key:0,href:s.route("admin.schedule.create",{date:l.startweekdate,day:g+1}),class:"btn btn-primary",title:"\u04E8\u0437\u0433\u0435\u0440\u0442\u0443"},{default:k(()=>[E]),_:2},1032,["href"])):m("",!0)])])]),t("tr",R,[t("td",null,[t("div",G,[t("table",H,[t("tbody",null,[(a(!0),n(u,null,v(l.schedules,e=>(a(),n("tr",{class:"odd",key:"schedule"+e.id},[e.day==g+1?(a(),n(u,{key:0},[t("td",null,r(e.start_time)+" - "+r(e.end_time),1),t("td",null,r(e.teacher.fio),1),t("td",null,r(e.group?e.group.name:"\u0412\u043D\u0435 \u0433\u0440\u0443\u043F\u043F\u044B"),1),e.edit?(a(),n("td",K,[B(t("select",{class:"form-control",onChange:_(c=>h.changeStatus(e.id,e.status),["prevent"]),"onUpdate:modelValue":c=>e.status=c,placeholder:"\u0411\u0435\u043B\u0441\u0435\u043D\u0434\u0456"},st,40,Q),[[Y,e.status]])])):(a(),n("td",J,[t("span",{class:L(["badge badge-success",{"badge-light":e.status==0,"badge-success":e.status==1,"badge-danger":e.status==2,"badge-warning":e.status==3}])},r(h.getStatusText(e.status)),3)])),t("td",null,[t("div",at,[t("button",{onClick:_(c=>h.deleteData(e.id),["prevent"]),class:"btn btn-danger",title:"\u0416\u043E\u044E"},dt,8,ot),e.edit?(a(),n("button",{key:1,onClick:_(c=>e.edit=0,["prevent"]),class:"btn btn-success",title:"\u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F"},_t,8,ct)):(a(),n("button",{key:0,onClick:_(c=>e.edit=1,["prevent"]),class:"btn btn-primary",title:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"},rt,8,lt))])])],64)):m("",!0)]))),128))])])])])])],64))),256))])])])])])])])):m("",!0)]),_:1})}const gt=x(T,[["render",ht]]);export{gt as default};
