import{A as g}from"./AdminLayout.359c072a.js";import{L as w,a as h,o as n,b as v,w as i,d as t,c as d,t as l,F as r,g as m,h as b,e as c,f,l as x}from"./app.62f83056.js";import{_ as C}from"./_plugin-vue_export-helper.cdc0426e.js";const B={components:{AdminLayout:g,Link:w},data(){var e;return{days:["\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A","\u0412\u0442\u043E\u0440\u043D\u0438\u043A","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041F\u044F\u0442\u043D\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043E\u0442\u0430","\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u0438\u0435"],currentDate:(e=route().params.date)!=null?e:"",schedules:null,startweekdate:null,endweekdate:null}},mounted(){this.$nextTick(()=>{console.log("Next tick executed");const e=$(this.$refs.calendar);e.datetimepicker({format:"L",inline:!0}),e.on("change.datetimepicker",s=>{this.toggleCollapse(s.date.format("YYYY-MM-DD"))})})},methods:{toggleCollapse(e){console.log(e),this.currentDate=e,axios.get(route("admin.schedule.getSchedule"),{params:{date:this.currentDate}}).then(s=>{this.schedules=s.data.schedules,this.startweekdate=s.data.startweekdate,this.endweekdate=s.data.endweekdate})},deleteData(e){Swal.fire({title:"\u0416\u043E\u044E\u0493\u0430 \u0441\u0435\u043D\u0456\u043C\u0434\u0456\u0441\u0456\u0437 \u0431\u0435",text:"\u049A\u0430\u0439\u0442\u044B\u043F \u049B\u0430\u043B\u043F\u044B\u043D\u0430 \u043A\u0435\u043B\u043C\u0435\u0443\u0456 \u043C\u04AF\u043C\u043A\u0456\u043D!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u0418\u04D9, \u0436\u043E\u044F\u043C\u044B\u043D!",cancelButtonText:"\u0411\u043E\u043B\u0434\u044B\u0440\u043C\u0430\u0443"}).then(s=>{s.isConfirmed&&!length&&this.$inertia.delete(route("admin.test.subjectPreparations.destroy",{subject:this.subject.id,preparation:e}))})}}},L={class:"card bg-gradient-success"},D=t("div",{class:"card-header border-0"},[t("h3",{class:"card-title"},[t("i",{class:"far fa-calendar-alt"}),c(" Calendar ")])],-1),j={class:"card-body pt-0"},N={ref:"calendar"},T={key:0,class:"container-fluid"},A={class:"card"},V={class:"card-body"},Y={class:"mb-3"},M={class:"row"},S={class:"col-sm-12"},F={class:"table table-hover"},E={"data-widget":"expandable-table","aria-expanded":"true"},I={class:"d-flex justify-content-between"},P=c(" \u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C "),q={class:"expandable-body"},z={class:"p-0",style:{}},G={class:"table mt-2 mb-3 table-hover table-bordered table-striped dataTable dtr-inline"},H={class:"btn-group btn-group-sm"},J=t("i",{class:"fas fa-edit"},null,-1),K=["onClick"],O=t("i",{class:"fas fa-trash"},null,-1),Q=[O];function R(e,s,U,W,o,p){const u=h("Link"),k=h("AdminLayout");return n(),v(k,null,{default:i(()=>[t("div",L,[D,t("div",j,[t("div",N,null,512)])]),o.schedules?(n(),d("div",T,[t("div",A,[t("div",V,[t("h3",Y,l(o.startweekdate+"-"+o.endweekdate),1),t("div",M,[t("div",S,[t("table",F,[t("tbody",null,[(n(!0),d(r,null,m(o.days,(y,_)=>(n(),d(r,null,[t("tr",E,[t("td",null,[t("div",I,[c(l(y)+" ",1),f(u,{href:e.route("admin.schedule.create",{date:o.startweekdate,day:_+1}),class:"btn btn-primary",title:"\u04E8\u0437\u0433\u0435\u0440\u0442\u0443"},{default:i(()=>[P]),_:2},1032,["href"])])])]),t("tr",q,[t("td",null,[t("div",z,[t("table",G,[t("tbody",null,[(n(!0),d(r,null,m(o.schedules,a=>(n(),d("tr",{class:"odd",key:"schedule"+a.id},[a.day==_+1?(n(),d(r,{key:0},[t("td",null,l(a.start_time)+" - "+l(a.end_time),1),t("td",null,l(a.subject.name),1),t("td",null,l(a.teacher.fio),1),t("td",null,[t("div",H,[f(u,{href:e.route("admin.schedule.edit",{schedule:a.id}),class:"btn btn-primary",title:"\u04E8\u0437\u0433\u0435\u0440\u0442\u0443"},{default:i(()=>[J]),_:2},1032,["href"]),t("button",{onClick:x(X=>p.deleteData(a.id),["prevent"]),class:"btn btn-danger",title:"\u0416\u043E\u044E"},Q,8,K)])])],64)):b("",!0)]))),128))])])])])])],64))),256))])])])])])])])):b("",!0)]),_:1})}const st=C(B,[["render",R]]);export{st as default};
