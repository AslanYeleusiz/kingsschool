import{_ as v,A as x}from"./AdminLayout.4c8d68b7.js";import{L as C,r as m,o,c as b,w as f,b as e,a as c,t as l,F as i,f as k,g as u,d as _,k as D}from"./app.205b37dc.js";const L={props:["user"],components:{AdminLayout:x,Link:C},data(){var t;return{days:["\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A","\u0412\u0442\u043E\u0440\u043D\u0438\u043A","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041F\u044F\u0442\u043D\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043E\u0442\u0430","\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u0438\u0435"],currentDate:(t=route().params.date)!=null?t:"",schedules:null,startweekdate:null,endweekdate:null}},mounted(){this.$nextTick(()=>{console.log("Next tick executed");const d=$(this.$refs.calendar);d.datetimepicker({format:"L",inline:!0}),d.on("change.datetimepicker",n=>{this.toggleCollapse(n.date.format("YYYY-MM-DD"))})});var t=new Date,r=t.getDay(),a=r===0?7:r;console.log(a),this.toggleCollapse(t.toISOString().slice(0,10))},methods:{toggleCollapse(t){console.log(t),this.currentDate=t;let a=new URLSearchParams(window.location.search).get("teacher_id");axios.get(route("admin.schedule.getSchedule"),{params:{date:this.currentDate,teacher_id:a!=null?a:null}}).then(d=>{this.schedules=d.data.schedules,this.startweekdate=d.data.startweekdate,this.endweekdate=d.data.endweekdate})},deleteData(t){Swal.fire({title:"\u0416\u043E\u044E\u0493\u0430 \u0441\u0435\u043D\u0456\u043C\u0434\u0456\u0441\u0456\u0437 \u0431\u0435",text:"\u049A\u0430\u0439\u0442\u044B\u043F \u049B\u0430\u043B\u043F\u044B\u043D\u0430 \u043A\u0435\u043B\u043C\u0435\u0443\u0456 \u043C\u04AF\u043C\u043A\u0456\u043D!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u0418\u04D9, \u0436\u043E\u044F\u043C\u044B\u043D!",cancelButtonText:"\u0411\u043E\u043B\u0434\u044B\u0440\u043C\u0430\u0443"}).then(r=>{r.isConfirmed&&this.$inertia.delete(route("admin.schedule.destroy",t))})}}},B={class:"card bg-gradient-success"},S=e("div",{class:"card-header border-0"},[e("h3",{class:"card-title"},[e("i",{class:"far fa-calendar-alt"}),_(" Calendar ")])],-1),T={class:"card-body pt-0"},A={ref:"calendar"},N={key:0,class:"container-fluid"},Y={class:"card"},j={class:"card-body"},M={class:"mb-3"},O={class:"row"},P={class:"col-sm-12"},V={class:"table table-hover"},F={"data-widget":"expandable-table","aria-expanded":"true"},I={class:"d-flex justify-content-between"},W=_(" \u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C "),E={class:"expandable-body"},R={class:"p-0",style:{}},U={class:"table mt-2 mb-3 table-hover table-bordered table-striped dataTable dtr-inline"},q={class:"btn-group btn-group-sm"},z=["onClick"],G=e("i",{class:"fas fa-trash"},null,-1),H=[G];function J(t,r,a,d,n,p){const g=m("Link"),y=m("AdminLayout");return o(),b(y,null,{default:f(()=>[e("div",B,[S,e("div",T,[e("div",A,null,512)])]),n.schedules?(o(),c("div",N,[e("div",Y,[e("div",j,[e("h3",M,l(n.startweekdate+"-"+n.endweekdate),1),e("div",O,[e("div",P,[e("table",V,[e("tbody",null,[(o(!0),c(i,null,k(n.days,(w,h)=>(o(),c(i,null,[e("tr",F,[e("td",null,[e("div",I,[_(l(w)+" ",1),a.user.role_id==1||a.user.role_id==2||a.user.role_id==3?(o(),b(g,{key:0,href:t.route("admin.schedule.create",{date:n.startweekdate,day:h+1}),class:"btn btn-primary",title:"\u04E8\u0437\u0433\u0435\u0440\u0442\u0443"},{default:f(()=>[W]),_:2},1032,["href"])):u("",!0)])])]),e("tr",E,[e("td",null,[e("div",R,[e("table",U,[e("tbody",null,[(o(!0),c(i,null,k(n.schedules,s=>(o(),c("tr",{class:"odd",key:"schedule"+s.id},[s.day==h+1?(o(),c(i,{key:0},[e("td",null,l(s.start_time)+" - "+l(s.end_time),1),e("td",null,l(s.subject.name),1),e("td",null,l(s.teacher.fio),1),e("td",null,l(s.group?s.group.name:"\u0412\u043D\u0435 \u0433\u0440\u0443\u043F\u043F\u044B"),1),e("td",null,[e("div",q,[e("button",{onClick:D(K=>p.deleteData(s.id),["prevent"]),class:"btn btn-danger",title:"\u0416\u043E\u044E"},H,8,z)])])],64)):u("",!0)]))),128))])])])])])],64))),256))])])])])])])])):u("",!0)]),_:1})}const Z=v(L,[["render",J]]);export{Z as default};
