import{_ as B,A as L}from"./AdminLayout.5406395a.js";import{L as T,r as C,o as e,c as v,w as g,b as t,a as n,t as i,g as b,F as m,f as p,d as y,n as w,q as x,s as D,m as h,e as O}from"./app.24e8fd2a.js";const V={props:["user"],components:{AdminLayout:L,Link:T},data(){return{days:["\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A","\u0412\u0442\u043E\u0440\u043D\u0438\u043A","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041F\u044F\u0442\u043D\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043E\u0442\u0430","\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u0438\u0435"],schedules:null,startweekdate:null,endweekdate:null,currentDate:null,dayOfWeek:null}},mounted(){this.$nextTick(()=>{console.log("Next tick executed");const c=$(this.$refs.calendar);moment.updateLocale("en",{week:{dow:1}}),c.datetimepicker({locale:"en",format:"YYYY-MM-DD",inline:!0}),c.on("change.datetimepicker",d=>{this.toggleCollapse(d.date.format("YYYY-MM-DD"))})});var a=new Date,r=a.getDay();console.log(a.toLocaleString());var l=r===0?7:r;console.log(l),this.toggleCollapse(a.toLocaleString().slice(0,10))},methods:{changeStatus(a,r){axios.post(route("admin.schedule.setStatus",a),{status:r}).then(l=>{console.log(l)})},toggleCollapse(a){console.log(a);let l=new URLSearchParams(window.location.search).get("teacher_id");axios.get(route("admin.schedule.getSchedule"),{params:{date:a,teacher_id:l!=null?l:null}}).then(c=>{console.log(c),this.schedules=c.data.schedules,this.startweekdate=c.data.startweekdate,this.endweekdate=c.data.endweekdate,this.currentDate=c.data.currentDate,this.dayOfWeek=c.data.dayOfWeek})},getBadgeClass(a){switch(a){case 0:return"badge-light";case 1:return"badge-success";case 2:return"badge-danger";case 3:return"badge-warning"}},getStatusText(a){switch(a){case 0:return"\u0423\u0440\u043E\u043A \u043D\u0435 \u043D\u0430\u0447\u0430\u043B\u0441\u044F";case 1:return"\u0423\u0440\u043E\u043A \u043F\u0440\u043E\u0432\u0435\u0434\u0451\u043D";case 2:return"\u0423\u0440\u043E\u043A \u043D\u0435 \u043F\u0440\u043E\u0432\u0435\u0434\u0451\u043D";case 3:return"\u0415\u0449\u0451 \u043D\u0435 \u043F\u0440\u0438\u0448\u0435\u043B"}},deleteData(a){Swal.fire({title:"\u0416\u043E\u044E\u0493\u0430 \u0441\u0435\u043D\u0456\u043C\u0434\u0456\u0441\u0456\u0437 \u0431\u0435",text:"\u049A\u0430\u0439\u0442\u044B\u043F \u049B\u0430\u043B\u043F\u044B\u043D\u0430 \u043A\u0435\u043B\u043C\u0435\u0443\u0456 \u043C\u04AF\u043C\u043A\u0456\u043D!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u0418\u04D9, \u0436\u043E\u044F\u043C\u044B\u043D!",cancelButtonText:"\u0411\u043E\u043B\u0434\u044B\u0440\u043C\u0430\u0443"}).then(r=>{r.isConfirmed&&this.$inertia.delete(route("admin.schedule.destroy",a))})}}},W={class:"card"},Y=t("div",{class:"card-header border-0"},[t("h3",{class:"card-title"},[t("i",{class:"far fa-calendar-alt"}),y(" Calendar ")])],-1),M={class:"card-body pt-0"},j={ref:"calendar"},N={key:0,class:"container-fluid"},U={class:"card"},A={class:"card-body"},P={class:"d-f a-c j-b"},F={class:"mb-3"},q=y(" \u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C "),z={class:"row"},E={class:"col-sm-12"},I={class:"p-0",style:{}},R={class:"table mt-2 mb-3 table-hover table-bordered table-striped dataTable dtr-inline"},G={key:0},H={key:1},J=["onChange","onUpdate:modelValue"],K=t("option",{value:0}," \u0423\u0440\u043E\u043A \u043D\u0435 \u043D\u0430\u0447\u0430\u043B\u0441\u044F ",-1),Q=t("option",{value:1}," \u0423\u0440\u043E\u043A \u043F\u0440\u043E\u0432\u0435\u0434\u0451\u043D ",-1),X=t("option",{value:2}," \u0423\u0440\u043E\u043A \u043D\u0435 \u043F\u0440\u043E\u0432\u0435\u0434\u0451\u043D ",-1),Z=t("option",{value:3}," \u0415\u0449\u0451 \u043D\u0435 \u043F\u0440\u0438\u0448\u0435\u043B ",-1),tt=[K,Q,X,Z],et={class:"btn-group btn-group-sm"},st=["onClick"],at=t("i",{class:"fas fa-trash"},null,-1),ot=[at],nt=["onClick"],lt=t("i",{class:"fas fa-edit"},null,-1),dt=[lt],it=["onClick"],ct=t("i",{class:"fas fa-check"},null,-1),rt=[ct],_t=t("i",{class:"fas fa-list"},null,-1),ut={key:1,class:"container-fluid mt-5"},ht={class:"card"},bt={class:"card-body"},mt={class:"mb-3"},ft={class:"row"},gt={class:"col-sm-12"},kt={class:"table table-hover"},vt={"data-widget":"expandable-table","aria-expanded":"true"},yt={class:"d-flex justify-content-between"},pt=y(" \u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C "),Ct={class:"expandable-body"},wt={class:"p-0",style:{}},xt={class:"table mt-2 mb-3 table-hover table-bordered table-striped dataTable dtr-inline"},Dt={key:0},St={key:1},Bt=["onChange","onUpdate:modelValue"],Lt=t("option",{value:0}," \u0423\u0440\u043E\u043A \u043D\u0435 \u043D\u0430\u0447\u0430\u043B\u0441\u044F ",-1),Tt=t("option",{value:1}," \u0423\u0440\u043E\u043A \u043F\u0440\u043E\u0432\u0435\u0434\u0451\u043D ",-1),Ot=t("option",{value:2}," \u0423\u0440\u043E\u043A \u043D\u0435 \u043F\u0440\u043E\u0432\u0435\u0434\u0451\u043D ",-1),Vt=t("option",{value:3}," \u0415\u0449\u0451 \u043D\u0435 \u043F\u0440\u0438\u0448\u0435\u043B ",-1),Wt=[Lt,Tt,Ot,Vt],Yt={class:"btn-group btn-group-sm"},Mt=["onClick"],jt=t("i",{class:"fas fa-trash"},null,-1),Nt=[jt],Ut=["onClick"],At=t("i",{class:"fas fa-edit"},null,-1),Pt=[At],Ft=["onClick"],qt=t("i",{class:"fas fa-check"},null,-1),zt=[qt],Et=t("i",{class:"fas fa-list"},null,-1);function It(a,r,l,c,d,_){const k=C("Link"),S=C("AdminLayout");return e(),v(S,null,{default:g(()=>[t("div",W,[Y,t("div",M,[t("div",j,null,512)])]),d.schedules?(e(),n("div",N,[t("div",U,[t("div",A,[t("div",P,[t("h3",F,i(d.days[d.dayOfWeek-1])+", "+i(d.currentDate),1),l.user.role_id==1||l.user.role_id==2||l.user.role_id==3?(e(),v(k,{key:0,href:a.route("admin.schedule.create",{date:d.startweekdate,day:d.dayOfWeek}),class:"btn btn-primary",title:"\u04E8\u0437\u0433\u0435\u0440\u0442\u0443"},{default:g(()=>[q]),_:1},8,["href"])):b("",!0)]),t("div",z,[t("div",E,[t("div",I,[t("table",R,[t("tbody",null,[(e(!0),n(m,null,p(d.schedules,s=>(e(),n("tr",{class:"odd",key:"schedule"+s.id},[s.day==d.dayOfWeek?(e(),n(m,{key:0},[t("td",null,i(s.start_time)+" - "+i(s.end_time),1),t("td",null,i(s.teacher.fio),1),t("td",null,i(s.group?s.group.name:"\u0412\u043D\u0435 \u0433\u0440\u0443\u043F\u043F\u044B"),1),s.edit?(e(),n("td",H,[x(t("select",{class:"form-control",onChange:h(u=>_.changeStatus(s.id,s.status),["prevent"]),"onUpdate:modelValue":u=>s.status=u,placeholder:"\u0411\u0435\u043B\u0441\u0435\u043D\u0434\u0456"},tt,40,J),[[D,s.status]])])):(e(),n("td",G,[t("span",{class:w(["badge badge-success",_.getBadgeClass(s.status)])},i(_.getStatusText(s.status)),3)])),t("td",null,[t("div",et,[t("button",{onClick:h(u=>_.deleteData(s.id),["prevent"]),class:"btn btn-danger",title:"\u0416\u043E\u044E"},ot,8,st),s.edit?(e(),n("button",{key:1,onClick:h(u=>s.edit=0,["prevent"]),class:"btn btn-success",title:"\u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F"},rt,8,it)):(e(),n("button",{key:0,onClick:h(u=>s.edit=1,["prevent"]),class:"btn btn-primary",title:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"},dt,8,nt)),O(k,{href:a.route("admin.journal.index",s.id),class:"btn btn-success",title:"\u0416\u0443\u0440\u043D\u0430\u043B"},{default:g(()=>[_t]),_:2},1032,["href"])])])],64)):b("",!0)]))),128))])])])])])])])])):b("",!0),d.schedules?(e(),n("div",ut,[t("div",ht,[t("div",bt,[t("h3",mt,"\u0420\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u044F \u043D\u0435\u0434\u0435\u043B\u0438 "+i(d.startweekdate+"-"+d.endweekdate),1),t("div",ft,[t("div",gt,[t("table",kt,[t("tbody",null,[(e(!0),n(m,null,p(d.days,(s,u)=>(e(),n(m,null,[t("tr",vt,[t("td",null,[t("div",yt,[y(i(s)+" ",1),l.user.role_id==1||l.user.role_id==2||l.user.role_id==3?(e(),v(k,{key:0,href:a.route("admin.schedule.create",{date:d.startweekdate,day:u+1}),class:"btn btn-primary",title:"\u04E8\u0437\u0433\u0435\u0440\u0442\u0443"},{default:g(()=>[pt]),_:2},1032,["href"])):b("",!0)])])]),t("tr",Ct,[t("td",null,[t("div",wt,[t("table",xt,[t("tbody",null,[(e(!0),n(m,null,p(d.schedules,o=>(e(),n("tr",{class:"odd",key:"schedule"+o.id},[o.day==u+1?(e(),n(m,{key:0},[t("td",null,i(o.start_time)+" - "+i(o.end_time),1),t("td",null,i(o.teacher.fio),1),t("td",null,i(o.group?o.group.name:"\u0412\u043D\u0435 \u0433\u0440\u0443\u043F\u043F\u044B"),1),o.edit?(e(),n("td",St,[x(t("select",{class:"form-control",onChange:h(f=>_.changeStatus(o.id,o.status),["prevent"]),"onUpdate:modelValue":f=>o.status=f,placeholder:"\u0411\u0435\u043B\u0441\u0435\u043D\u0434\u0456"},Wt,40,Bt),[[D,o.status]])])):(e(),n("td",Dt,[t("span",{class:w(["badge badge-success",_.getBadgeClass(o.status)])},i(_.getStatusText(o.status)),3)])),t("td",null,[t("div",Yt,[t("button",{onClick:h(f=>_.deleteData(o.id),["prevent"]),class:"btn btn-danger",title:"\u0416\u043E\u044E"},Nt,8,Mt),o.edit?(e(),n("button",{key:1,onClick:h(f=>o.edit=0,["prevent"]),class:"btn btn-success",title:"\u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F"},zt,8,Ft)):(e(),n("button",{key:0,onClick:h(f=>o.edit=1,["prevent"]),class:"btn btn-primary",title:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"},Pt,8,Ut)),l.user.role_id==1||l.user.role_id==2||l.user.role_id==3?(e(),v(k,{key:2,href:a.route("admin.journal.index",o.id),class:"btn btn-success",title:"\u0416\u0443\u0440\u043D\u0430\u043B"},{default:g(()=>[Et]),_:2},1032,["href"])):b("",!0)])])],64)):b("",!0)]))),128))])])])])])],64))),256))])])])])])])])):b("",!0)]),_:1})}const Ht=B(V,[["render",It]]);export{Ht as default};
