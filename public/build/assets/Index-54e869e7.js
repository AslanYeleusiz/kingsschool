import{_ as v,A as g}from"./AdminLayout-e2a9f783.js";import{L as D,H as w,r as p,o as t,e as o,b as x,w as b,F as c,a as e,t as u,g as O,l as S,h as r,i as m,m as j,d as B}from"./app-76f5f351.js";import{P as C}from"./Pagination-6b5293cb.js";const T={components:{AdminLayout:g,Link:D,Pagination:C,Head:w},props:["schedule","schedule_day","lastDayOfMonth","journals","likeThisDate","days"],data(){return{loading:0,journal_students:this.journals??[],isPopupOpen:!1,student_id:null,status:null,hiddenOrio:!1,parsedDays:[]}},computed:{statusByStudentId(){return(l,i)=>{const s=this.journal_students.find(_=>{const n=new Date(_.date);return _.edu_order_id===l&&n.getDate()===i});return s?s.type:0}}},mounted(){this.parsedDays=this.days},methods:{submit(l,i,s){axios.post(route("admin.journal.store",{schedule_id:this.schedule.id}),{teacher_id:this.schedule.teacher_id,edu_order_id:s,group_id:this.schedule.group_id,type:l,date:this.schedule.year+"-"+this.schedule.month+"-"+i}).then(_=>{this.journal_students=_.data.journals})},changeStatus(l,i,s){switch(s){case 0:return this.submit(1,i,l);case 1:return this.submit(2,i,l);case 2:return this.submit(0,i,l)}}}},I=e("head",null,[e("title",null,"Админ панель | Журнал")],-1),L={class:"row mb-2"},V={class:"col-sm-6"},A={class:"m-0"},M={class:"mt-1"},N={class:"col-sm-6"},P={class:"breadcrumb float-sm-right"},F={class:"breadcrumb-item"},H=["href"],q=e("i",{class:"fas fa-dashboard"},null,-1),z=B(" Главная страница "),E=[q,z],U=e("li",{class:"breadcrumb-item active"}," Журнал ",-1),G={key:0,class:"d-f j-b"},J=e("div",null,null,-1),K={class:"form-group"},Q={class:"custom-control custom-switch"},R=e("label",{class:"custom-control-label",for:"customSwitch1"},"Скрыть лишние дни",-1),W={class:"container-fluid"},X={class:"card"},Y={class:"card-body overflow-auto"},Z={class:"row"},$={class:"col-sm-12"},ee={class:"table table-hover table-bordered dataTable dtr-inline"},se={role:"row"},te=e("th",null,"№",-1),oe=e("th",null,"Аты",-1),de={key:0,class:"t-c"},ie={class:"odd"},le=["onClick"],ne={key:0,class:"fas fa-solid fa-plus"},ae={key:1,class:"fas fa-solid fa-minus"};function ce(l,i,s,_,n,h){const y=p("AdminLayout");return t(),o(c,null,[I,x(y,null,{breadcrumbs:b(()=>[e("div",L,[e("div",V,[e("h1",A,"Журнал преподавателя "+u(s.schedule.teacher.fio),1),e("h5",M,"Группа: "+u(s.schedule.group.name),1)]),e("div",N,[e("ol",P,[e("li",F,[e("a",{href:l.route("admin.index")},E,8,H)]),U])])]),s.likeThisDate?(t(),o("div",G,[J,e("div",K,[e("div",Q,[O(e("input",{type:"checkbox","onUpdate:modelValue":i[0]||(i[0]=d=>n.hiddenOrio=d),class:"custom-control-input",id:"customSwitch1"},null,512),[[S,n.hiddenOrio]]),R])])])):r("",!0)]),default:b(()=>[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[e("div",$,[e("table",ee,[e("thead",null,[e("tr",se,[te,oe,(t(!0),o(c,null,m(s.lastDayOfMonth,d=>(t(),o(c,{key:d},[n.parsedDays.includes(d)?(t(),o(c,{key:0},[!n.hiddenOrio||d==s.schedule_day&&s.likeThisDate?(t(),o("th",de,u(d)+" "+u(n.hiddenOrio?"(Сегодня)":""),1)):r("",!0)],64)):r("",!0)],64))),128))])]),e("tbody",null,[(t(!0),o(c,null,m(s.schedule.group_orders,(d,k)=>{var f;return t(),o("tr",ie,[e("td",null,u(k+1),1),e("td",null,u((f=d.edu_order.user)==null?void 0:f.fio),1),(t(!0),o(c,null,m(s.lastDayOfMonth,a=>(t(),o(c,{key:a},[n.parsedDays.includes(a)?(t(),o(c,{key:0},[!n.hiddenOrio||a==s.schedule_day&&s.likeThisDate?(t(),o("td",{key:0,onClick:re=>h.changeStatus(d.edu_order_id,a,h.statusByStudentId(d.edu_order_id,a)),class:j([[a==s.schedule_day&&s.likeThisDate?"c-p bg":"disabled"],"square"])},[h.statusByStudentId(d.edu_order_id,a)==1?(t(),o("i",ne)):r("",!0),h.statusByStudentId(d.edu_order_id,a)==2?(t(),o("i",ae)):r("",!0)],10,le)):r("",!0)],64)):r("",!0)],64))),128))])}),256))])])])])])])])]),_:1})],64)}const me=v(T,[["render",ce]]);export{me as default};
