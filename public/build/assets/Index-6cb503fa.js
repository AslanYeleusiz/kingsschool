import{_ as y,A as k}from"./AdminLayout-40ee1a90.js";import{L as w,H as B,r,o as i,e as a,b as h,w as m,F as v,a as t,t as l,i as L,g as f,v as p,f as S,h as x,n as A,d as P}from"./app-15681a8f.js";import{P as j}from"./Pagination-43b649e4.js";const C={components:{AdminLayout:k,Link:w,Pagination:j,Head:B},props:["eduPaidOrders","teacher"],data(){return{filter:{fio:route().params.fio?route().params.fio:null},loading:0,penalty:0,bonus:0}},methods:{getSalary(d){Swal.fire({title:"Выдать зарплату?",text:"Отчёт о предыдущих зарплатах можно увидеть на панеле отчёта!",icon:"success",showCancelButton:!0,confirmButtonColor:"#71DD37",cancelButtonColor:"#d33",confirmButtonText:"Выдать!",cancelButtonText:"Отмена"}).then(o=>{o.isConfirmed&&this.$inertia.post(route("admin.teachers.reportStore",d),{penalty:this.penalty,bonus:this.bonus,price:this.calculateAllPrice(1)+(this.bonus-this.penalty)})})},calculateAllPrice(d){return this.eduPaidOrders.reduce((e,_)=>e+(d?_.newPrice:_.price),0)}}},V=t("head",null,[t("title",null,"Админ панель | Отчет")],-1),T={class:"row mb-2"},D={class:"col-sm-6"},N={class:"m-0"},I=t("h5",{class:"m-0"},"Отчет для выдачи зарплаты за этот период",-1),F={class:"col-sm-6"},H={class:"breadcrumb float-sm-right"},M={class:"breadcrumb-item"},U=["href"],z=t("i",{class:"fas fa-dashboard"},null,-1),E=P(" Басты бет "),q=[z,E],G=t("li",{class:"breadcrumb-item active"}," Отчет тізімі ",-1),J={key:0,class:"container-fluid"},K={class:"card"},Q={class:"card-body"},R={class:"row"},W={class:"col-sm-12"},X={class:"table table-hover table-bordered table-striped dataTable dtr-inline"},Y=t("thead",null,[t("tr",{role:"row"},[t("th",null,"№"),t("th"),t("th",null,"ФИО"),t("th",null,"Предмет"),t("th",{class:"t-c"},"Статус"),t("th",{class:"t-c"},"Цена"),t("th",{class:"t-c"},"Зарплата")]),t("tr",{class:"filters"},[t("td"),t("td"),t("td"),t("td"),t("td"),t("td"),t("td")])],-1),Z={class:"d-f aj-c"},O={class:"d-f j-c"},$={class:"paidBlock"},tt=t("div",{class:"paid success"},"Оплачено",-1),st={class:"paid date"},lt={class:"d-f j-c"},ot={class:"paidBlock"},et={class:"paid success"},nt={class:"paid date"},dt=t("td",null,[t("div",{class:"d-f j-c"},[t("span",{class:"badge badge-warning"}," Не выдано ")])],-1),ct=t("tr",null,[t("td"),t("td"),t("td"),t("td"),t("td"),t("td"),t("td")],-1),it={class:"odd"},at=t("td",null,null,-1),_t=t("td",null,null,-1),ut=t("td",null,null,-1),rt=t("td",null,null,-1),ht=t("td",{class:"t-r"},"Общее",-1),mt={class:"d-f j-c"},vt={class:"paidBlock"},ft={class:"paid pd success no-hover"},pt={class:"paid date no-hover"},bt=t("td",null,null,-1),gt={class:"odd"},yt=t("td",null,null,-1),kt=t("td",null,null,-1),wt=t("td",null,null,-1),Bt=t("td",null,null,-1),Lt=t("td",{class:"t-r"},"Штраф",-1),St=t("td",null,null,-1),xt={class:"odd"},At=t("td",null,null,-1),Pt=t("td",null,null,-1),jt=t("td",null,null,-1),Ct=t("td",null,null,-1),Vt=t("td",{class:"t-r"},"Премия",-1),Tt=t("td",null,null,-1),Dt={class:"odd"},Nt=t("td",null,null,-1),It=t("td",null,null,-1),Ft=t("td",null,null,-1),Ht=t("td",null,null,-1),Mt=t("td",{class:"t-r"},"Итог",-1),Ut={class:"d-f j-c"},zt={class:"paidBlock"},Et={class:"paid pd success no-hover"},qt={class:"paid date no-hover"},Gt=t("td",null,null,-1),Jt={class:"odd"},Kt=t("td",null,null,-1),Qt=t("td",null,null,-1),Rt=t("td",null,null,-1),Wt=t("td",null,null,-1),Xt=t("td",null,null,-1),Yt=t("td",null,null,-1);function Zt(d,o,e,_,n,c){const b=r("Pagination"),g=r("AdminLayout");return i(),a(v,null,[V,h(g,null,{breadcrumbs:m(()=>[t("div",T,[t("div",D,[t("h1",N,[t("b",null,l(e.teacher.fio),1)]),I]),t("div",F,[t("ol",H,[t("li",M,[t("a",{href:d.route("admin.index")},q,8,U)]),G])])])]),default:m(()=>[e.eduPaidOrders.length?(i(),a("div",J,[t("div",K,[t("div",Q,[t("div",R,[t("div",W,[t("table",X,[Y,t("tbody",null,[(i(!0),a(v,null,L(e.eduPaidOrders,(s,u)=>(i(),a("tr",{class:"odd",key:"eduPaidOrder"+s.id},[t("td",null,l(s.from?s.from+u:u+1),1),t("td",Z,[t("div",{class:"avatar",style:A({backgroundImage:`url(/storage/files/${s.edu_order.user.avatar})`})},null,4)]),t("td",null,l(s.edu_order.user.fio),1),t("td",null,l(s.edu_order.subject?s.edu_order.subject.name:"Нет данных"),1),t("td",null,[t("div",O,[t("div",$,[tt,t("div",st,l(s.date),1)])])]),t("td",null,[t("div",lt,[t("div",ot,[t("div",et,l(s.price.toLocaleString()),1),t("div",nt,l(s.newPrice.toLocaleString()),1)])])]),dt]))),128)),ct,t("tr",it,[at,_t,ut,rt,ht,t("td",null,[t("div",mt,[t("div",vt,[t("div",ft,l(c.calculateAllPrice(0).toLocaleString()),1),t("div",pt,l(c.calculateAllPrice(1).toLocaleString()),1)])])]),bt]),t("tr",gt,[yt,kt,wt,Bt,Lt,t("td",null,[f(t("input",{type:"integer",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=s=>n.penalty=s)},null,512),[[p,n.penalty]])]),St]),t("tr",xt,[At,Pt,jt,Ct,Vt,t("td",null,[f(t("input",{type:"integer",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=s=>n.bonus=s)},null,512),[[p,n.bonus]])]),Tt]),t("tr",Dt,[Nt,It,Ft,Ht,Mt,t("td",null,[t("div",Ut,[t("div",zt,[t("div",Et,l(c.calculateAllPrice(0).toLocaleString()),1),t("div",qt,l((c.calculateAllPrice(1)+(n.bonus-n.penalty)).toLocaleString()),1)])])]),Gt]),t("tr",Jt,[Kt,Qt,Rt,Wt,Xt,t("td",null,[t("button",{onClick:o[2]||(o[2]=S(s=>c.getSalary(e.teacher.id),["prevent"])),class:"btn btn-success w-100"},"Выдать зарплату")]),Yt])])])])]),h(b,{links:e.eduPaidOrders.links},null,8,["links"])])])])):x("",!0)]),_:1})],64)}const ss=y(C,[["render",Zt]]);export{ss as default};
