import{_ as L,A as B}from"./AdminLayout.4b3ec41f.js";import{L as T,r as w,o as e,c as v,w as g,b as t,a as n,t as i,h as b,F as m,g as p,d as y,n as C,f as x,u as D,q as h,e as O}from"./app.eed87f0d.js";const V={props:["user"],components:{AdminLayout:B,Link:T},data(){return{days:["\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A","\u0412\u0442\u043E\u0440\u043D\u0438\u043A","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041F\u044F\u0442\u043D\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043E\u0442\u0430","\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u0438\u0435"],schedules:null,startweekdate:null,endweekdate:null,currentDate:null,dayOfWeek:null}},mounted(){this.$nextTick(()=>{console.log("Next tick executed");const c=$(this.$refs.calendar);moment.updateLocale("en",{week:{dow:1}}),c.datetimepicker({locale:"en",format:"YYYY-MM-DD",inline:!0}),c.on("change.datetimepicker",d=>{this.toggleCollapse(d.date.format("YYYY-MM-DD"))})});var a=new Date,r=a.getDay();console.log(a.toLocaleString());var l=r===0?7:r;console.log(l),this.toggleCollapse(a.toLocaleString().slice(0,10))},methods:{changeStatus(a,r){axios.post(route("admin.schedule.setStatus",a),{status:r}).then(l=>{console.log(l)})},toggleCollapse(a){console.log(a);let l=new URLSearchParams(window.location.search).get("teacher_id");axios.get(route("admin.schedule.getSchedule"),{params:{date:a,teacher_id:l!=null?l:null}}).then(c=>{console.log(c),this.schedules=c.data.schedules,this.startweekdate=c.data.startweekdate,this.endweekdate=c.data.endweekdate,this.currentDate=c.data.currentDate,this.dayOfWeek=c.data.dayOfWeek})},getBadgeClass(a){switch(a){case 0:return"badge-light";case 1:return"badge-success";case 2:return"badge-danger";case 3:return"badge-warning"}},getStatusText(a){switch(a){case 0:return"\u0423\u0440\u043E\u043A \u043D\u0435 \u043D\u0430\u0447\u0430\u043B\u0441\u044F";case 1:return"\u0423\u0440\u043E\u043A \u043F\u0440\u043E\u0432\u0435\u0434\u0451\u043D";case 2:return"\u0423\u0440\u043E\u043A \u043D\u0435 \u043F\u0440\u043E\u0432\u0435\u0434\u0451\u043D";case 3:return"\u0415\u0449\u0451 \u043D\u0435 \u043F\u0440\u0438\u0448\u0435\u043B"}},deleteData(a){Swal.fire({title:"\u0423\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C?",text:"\u0412\u043E\u0437\u043C\u043E\u0436\u043D\u043E, \u0447\u0442\u043E \u043D\u0435\u043B\u044C\u0437\u044F \u0431\u0443\u0434\u0435\u0442 \u0432\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u0414\u0430, \u0443\u0434\u0430\u043B\u044E!",cancelButtonText:"\u041E\u0442\u043C\u0435\u043D\u0430"}).then(r=>{r.isConfirmed&&axios.delete(route("admin.schedule.destroy",a)).catch(l=>{var c=new Date;this.toggleCollapse(c.toLocaleString().slice(0,10))})})}}},W={class:"card"},Y={class:"row"},M={class:"col-md-4"},j=t("div",{class:"card-header border-0"},[t("h3",{class:"card-title"},[t("i",{class:"far fa-calendar-alt"}),y(" Calendar ")])],-1),N={class:"card-body pt-0"},U={ref:"calendar"},A={key:0,class:"col-md-8"},P={class:"card-body"},F={class:"d-f a-c j-b"},q={class:"mb-3"},z=y(" \u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C "),E={class:"row"},I={class:"col-sm-12"},R={class:"p-0",style:{}},G={class:"table mt-2 mb-3 table-hover table-bordered table-striped dataTable dtr-inline"},H={key:0},J={key:1},K=["onChange","onUpdate:modelValue"],Q=t("option",{value:0}," \u0423\u0440\u043E\u043A \u043D\u0435 \u043D\u0430\u0447\u0430\u043B\u0441\u044F ",-1),X=t("option",{value:1}," \u0423\u0440\u043E\u043A \u043F\u0440\u043E\u0432\u0435\u0434\u0451\u043D ",-1),Z=t("option",{value:2}," \u0423\u0440\u043E\u043A \u043D\u0435 \u043F\u0440\u043E\u0432\u0435\u0434\u0451\u043D ",-1),tt=t("option",{value:3}," \u0415\u0449\u0451 \u043D\u0435 \u043F\u0440\u0438\u0448\u0435\u043B ",-1),et=[Q,X,Z,tt],st={class:"btn-group btn-group-sm"},at=["onClick"],ot=t("i",{class:"fas fa-trash"},null,-1),nt=[ot],lt=["onClick"],dt=t("i",{class:"fas fa-edit"},null,-1),it=[dt],ct=["onClick"],rt=t("i",{class:"fas fa-check"},null,-1),_t=[rt],ut=t("i",{class:"fas fa-list"},null,-1),ht={key:0,class:"container-fluid mt-4"},bt={class:"card"},mt={class:"card-body"},ft={class:"mb-3"},gt={class:"row"},kt={class:"col-sm-12"},vt={class:"table table-hover"},yt={"data-widget":"expandable-table","aria-expanded":"true"},pt={class:"d-flex justify-content-between"},wt=y(" \u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C "),Ct={class:"expandable-body"},xt={class:"p-0",style:{}},Dt={class:"table mt-2 mb-3 table-hover table-bordered table-striped dataTable dtr-inline"},St={key:0},Lt={key:1},Bt=["onChange","onUpdate:modelValue"],Tt=t("option",{value:0}," \u0423\u0440\u043E\u043A \u043D\u0435 \u043D\u0430\u0447\u0430\u043B\u0441\u044F ",-1),Ot=t("option",{value:1}," \u0423\u0440\u043E\u043A \u043F\u0440\u043E\u0432\u0435\u0434\u0451\u043D ",-1),Vt=t("option",{value:2}," \u0423\u0440\u043E\u043A \u043D\u0435 \u043F\u0440\u043E\u0432\u0435\u0434\u0451\u043D ",-1),Wt=t("option",{value:3}," \u0415\u0449\u0451 \u043D\u0435 \u043F\u0440\u0438\u0448\u0435\u043B ",-1),Yt=[Tt,Ot,Vt,Wt],Mt={class:"btn-group btn-group-sm"},jt=["onClick"],Nt=t("i",{class:"fas fa-trash"},null,-1),Ut=[Nt],At=["onClick"],Pt=t("i",{class:"fas fa-edit"},null,-1),Ft=[Pt],qt=["onClick"],zt=t("i",{class:"fas fa-check"},null,-1),Et=[zt],It=t("i",{class:"fas fa-list"},null,-1);function Rt(a,r,l,c,d,_){const k=w("Link"),S=w("AdminLayout");return e(),v(S,null,{default:g(()=>[t("div",W,[t("div",Y,[t("div",M,[j,t("div",N,[t("div",U,null,512)])]),d.schedules?(e(),n("div",A,[t("div",P,[t("div",F,[t("h3",q,i(d.days[d.dayOfWeek-1])+", "+i(d.currentDate),1),l.user.role_id==1||l.user.role_id==2||l.user.role_id==3?(e(),v(k,{key:0,href:a.route("admin.schedule.create",{date:d.startweekdate,day:d.dayOfWeek}),class:"btn btn-primary",title:"\u04E8\u0437\u0433\u0435\u0440\u0442\u0443"},{default:g(()=>[z]),_:1},8,["href"])):b("",!0)]),t("div",E,[t("div",I,[t("div",R,[t("table",G,[t("tbody",null,[(e(!0),n(m,null,p(d.schedules,s=>(e(),n("tr",{class:"odd",key:"schedule"+s.id},[s.day==d.dayOfWeek?(e(),n(m,{key:0},[t("td",null,i(s.start_time)+" - "+i(s.end_time),1),t("td",null,i(s.teacher.fio),1),t("td",null,i(s.group?s.group.name:"\u0412\u043D\u0435 \u0433\u0440\u0443\u043F\u043F\u044B"),1),s.edit?(e(),n("td",J,[x(t("select",{class:"form-control",onChange:h(u=>_.changeStatus(s.id,s.status),["prevent"]),"onUpdate:modelValue":u=>s.status=u,placeholder:"\u0411\u0435\u043B\u0441\u0435\u043D\u0434\u0456"},et,40,K),[[D,s.status]])])):(e(),n("td",H,[t("span",{class:C(["badge badge-success",_.getBadgeClass(s.status)])},i(_.getStatusText(s.status)),3)])),t("td",null,[t("div",st,[t("button",{onClick:h(u=>_.deleteData(s.id),["prevent"]),class:"btn btn-danger",title:"\u0416\u043E\u044E"},nt,8,at),s.edit?(e(),n("button",{key:1,onClick:h(u=>s.edit=0,["prevent"]),class:"btn btn-success",title:"\u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F"},_t,8,ct)):(e(),n("button",{key:0,onClick:h(u=>s.edit=1,["prevent"]),class:"btn btn-primary",title:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"},it,8,lt)),O(k,{href:a.route("admin.journal.index",s.id),class:"btn btn-success",title:"\u0416\u0443\u0440\u043D\u0430\u043B"},{default:g(()=>[ut]),_:2},1032,["href"])])])],64)):b("",!0)]))),128))])])])])])])])):b("",!0)])]),d.schedules?(e(),n("div",ht,[t("div",bt,[t("div",mt,[t("h3",ft,"\u0420\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u044F \u043D\u0435\u0434\u0435\u043B\u0438 "+i(d.startweekdate+"-"+d.endweekdate),1),t("div",gt,[t("div",kt,[t("table",vt,[t("tbody",null,[(e(!0),n(m,null,p(d.days,(s,u)=>(e(),n(m,null,[t("tr",yt,[t("td",null,[t("div",pt,[y(i(s)+" ",1),l.user.role_id<=3?(e(),v(k,{key:0,href:a.route("admin.schedule.create",{date:d.startweekdate,day:u+1}),class:"btn btn-primary",title:"\u04E8\u0437\u0433\u0435\u0440\u0442\u0443"},{default:g(()=>[wt]),_:2},1032,["href"])):b("",!0)])])]),t("tr",Ct,[t("td",null,[t("div",xt,[t("table",Dt,[t("tbody",null,[(e(!0),n(m,null,p(d.schedules,o=>(e(),n("tr",{class:"odd",key:"schedule"+o.id},[o.day==u+1?(e(),n(m,{key:0},[t("td",null,i(o.start_time)+" - "+i(o.end_time),1),t("td",null,i(o.teacher.fio),1),t("td",null,i(o.group?o.group.name:"\u0412\u043D\u0435 \u0433\u0440\u0443\u043F\u043F\u044B"),1),o.edit?(e(),n("td",Lt,[x(t("select",{class:"form-control",onChange:h(f=>_.changeStatus(o.id,o.status),["prevent"]),"onUpdate:modelValue":f=>o.status=f,placeholder:"\u0411\u0435\u043B\u0441\u0435\u043D\u0434\u0456"},Yt,40,Bt),[[D,o.status]])])):(e(),n("td",St,[t("span",{class:C(["badge badge-success",_.getBadgeClass(o.status)])},i(_.getStatusText(o.status)),3)])),t("td",null,[t("div",Mt,[t("button",{onClick:h(f=>_.deleteData(o.id),["prevent"]),class:"btn btn-danger",title:"\u0416\u043E\u044E"},Ut,8,jt),o.edit?(e(),n("button",{key:1,onClick:h(f=>o.edit=0,["prevent"]),class:"btn btn-success",title:"\u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F"},Et,8,qt)):(e(),n("button",{key:0,onClick:h(f=>o.edit=1,["prevent"]),class:"btn btn-primary",title:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"},Ft,8,At)),l.user.role_id==1||l.user.role_id==2||l.user.role_id==3?(e(),v(k,{key:2,href:a.route("admin.journal.index",o.id),class:"btn btn-success",title:"\u0416\u0443\u0440\u043D\u0430\u043B"},{default:g(()=>[It]),_:2},1032,["href"])):b("",!0)])])],64)):b("",!0)]))),128))])])])])])],64))),256))])])])])])])])):b("",!0)]),_:1})}const Jt=L(V,[["render",Rt]]);export{Jt as default};
