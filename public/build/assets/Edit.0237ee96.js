import{_ as y,A as g}from"./AdminLayout.195c2df5.js";import{L as w,H as O,r as j,o as r,a as i,e as V,w as v,F as u,b as e,k as a,l as n,p as c,f as _,v as m,u as k,t as h,d as b}from"./app.c47bef28.js";import{P as x}from"./Pagination.de9b3fc6.js";import{V as C}from"./ValidationError.aed18fcb.js";const P={components:{AdminLayout:g,Link:w,Pagination:x,ValidationError:C,Head:O},props:["edu_order","trainTypes","courseTypes","subjects","teachers","shifts","user_id"],data(){return{eduOrder:{price:this.edu_order.price},teacherOrders:this.trainTypes,subjectOrders:null}},methods:{calculatePrice(d=null){if(!this.edu_order.subject_id)return this.warningText("\u041F\u0440\u0435\u0434\u043C\u0435\u0442 \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D!",null);d?axios.get(`/subject/${this.edu_order.subject_id}/get-subject-order`).then(s=>{this.subjectOrders=s.data,this.eduOrder.price=this.subjectOrders.find(o=>o.course_type_id==this.edu_order.course_type_id&&o.shift_id==this.edu_order.shift_id&&o.train_type_id==this.edu_order.train_type_id).price}):this.eduOrder.price=this.subjectOrders.find(s=>s.course_type_id==this.edu_order.course_type_id&&s.shift_id==this.edu_order.shift_id&&s.train_type_id==this.edu_order.train_type_id).price},warningText(d,s="\u0411\u0430\u0440\u043B\u044B\u049B \u0431\u0430\u0493\u0430\u043D\u0434\u0430\u0440 \u0442\u043E\u043B\u0442\u044B\u0440\u0443 \u049B\u0430\u0436\u0435\u0442!"){Swal.fire({title:d,text:s,icon:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"\u041E\u043A\u0435\u0439!"})},add28Days(){if(this.edu_order.start_date){const d=new Date(this.edu_order.start_date),s=new Date(d.getTime()+28*24*60*60*1e3);this.edu_order.end_date=s.toISOString().split("T")[0]}else console.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u0442\u0443")},submit(){this.edu_order.price=this.eduOrder.price,this.$inertia.put(route("admin.studentsSubjects.update",[this.user_id,this.edu_order.id]),this.edu_order,{onError:()=>console.log("An errors has occurred"),onSuccess:()=>console.log("The new contact has been saved")})},logme(d,s,o){console.log(d+" "+s+" "+o)}}},S=e("head",null,[e("title",null,"\u0410\u0434\u043C\u0438\u043D \u043F\u0430\u043D\u0435\u043B\u044C | \u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0440\u0435\u0434\u043C\u0435\u0442")],-1),T={class:"row mb-2"},U=e("div",{class:"col-sm-6"},[e("h1",{class:"m-0"},"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0440\u0435\u0434\u043C\u0435\u0442")],-1),D={class:"col-sm-6"},q={class:"breadcrumb float-sm-right"},B={class:"breadcrumb-item"},L=["href"],A=e("i",{class:"fas fa-dashboard"},null,-1),E=b(" \u0413\u043B\u0430\u0432\u043D\u0430\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 "),M=[A,E],N={class:"breadcrumb-item"},F=["href"],H=e("i",{class:"fas fa-dashboard"},null,-1),I=b(" \u041F\u0440\u0435\u0434\u043C\u0435\u0442\u044B \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0430 "),z=[H,I],G=e("li",{class:"breadcrumb-item active"}," \u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0440\u0435\u0434\u043C\u0435\u0442 ",-1),J={class:"container-fluid"},K={class:"card card-primary"},Q={class:"card-body"},R={class:"row"},W={class:"col-md-4"},X={class:"form-group"},Y=e("label",{for:""},"\u041F\u0440\u0435\u0434\u043C\u0435\u0442",-1),Z=e("option",{value:"",disabled:"",selected:"",hidden:""}," \u0412\u044B\u0431\u0440\u0430\u0442\u044C ",-1),$=["value"],ee={class:"col-md-4"},te={class:"form-group"},se=e("label",{for:""},"\u041F\u0440\u0435\u043F\u043E\u0434\u0430\u0432\u0430\u0442\u0435\u043B\u044C",-1),oe=e("option",{value:"",hidden:""}," \u0412\u044B\u0431\u0440\u0430\u0442\u044C ",-1),de=["value"],re={class:"col-md-4"},ie={class:"form-group"},ne=e("label",{for:""},"\u0422\u0438\u043F \u043F\u043E\u0441\u0435\u0449\u0435\u043D\u0438\u044F",-1),le=e("option",{value:"",hidden:""}," \u0412\u044B\u0431\u0440\u0430\u0442\u044C ",-1),ae=["value"],ue={class:"row"},ce={class:"col-md-4"},_e={class:"form-group"},he=e("label",{for:""},"\u041A\u0443\u0440\u0441",-1),me=e("option",{value:null,hidden:""}," \u0412\u044B\u0431\u0440\u0430\u0442\u044C ",-1),fe=["value"],ve={class:"col-md-4"},be={class:"form-group"},pe=e("label",{for:""},"\u041E\u0431\u0443\u0447\u0435\u043D\u0438\u0435",-1),ye=e("option",{value:null,hidden:""}," \u0412\u044B\u0431\u0440\u0430\u0442\u044C ",-1),ge=["value"],we={class:"col-md-4"},Oe={class:"form-group"},je=e("label",{for:""},"\u0426\u0435\u043D\u0430",-1),Ve={class:"row"},ke={class:"col-md-4"},xe={class:"form-group"},Ce=e("label",{for:""},"\u0414\u0430\u0442\u0430 \u043D\u0430\u0447\u0430\u043B\u043E \u043E\u0431\u0443\u0447\u0435\u043D\u0438\u044F",-1),Pe={class:"col-md-4"},Se={class:"form-group"},Te=e("label",{for:""},"\u0414\u0430\u0442\u0430 \u043A\u043E\u043D\u0446\u0430 \u043E\u0431\u0443\u0447\u0435\u043D\u0438\u044F",-1),Ue={class:"form-group"},De={class:"custom-control custom-switch"},qe=e("label",{class:"custom-control-label",for:"customSwitch1"},"\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0439 \u043F\u0440\u0435\u0434\u043C\u0435\u0442",-1),Be={class:"card-footer"},Le=e("button",{type:"submit",class:"btn btn-primary mr-1"}," \u0421\u0430\u049B\u0442\u0430\u0443 ",-1);function Ae(d,s,o,Ee,f,l){const p=j("AdminLayout");return r(),i(u,null,[S,V(p,null,{breadcrumbs:v(()=>[e("div",T,[U,e("div",D,[e("ol",q,[e("li",B,[e("a",{href:d.route("admin.index")},M,8,L)]),e("li",N,[e("a",{href:d.route("admin.studentsSubjects.index",this.user_id)},z,8,F)]),G])])])]),default:v(()=>[e("div",J,[e("div",K,[e("form",{method:"post",onSubmit:s[15]||(s[15]=a((...t)=>l.submit&&l.submit(...t),["prevent"]))},[e("div",Q,[e("div",R,[e("div",W,[e("div",X,[Y,n(e("select",{class:"form-control",onChange:s[0]||(s[0]=a(t=>l.calculatePrice(!0),["prevent"])),"onUpdate:modelValue":s[1]||(s[1]=t=>o.edu_order.subject_id=t),required:""},[Z,(r(!0),i(u,null,_(o.subjects,t=>(r(),i("option",{key:"subject"+t.id,value:t.id},h(t.name),9,$))),128))],544),[[c,o.edu_order.subject_id]])])]),e("div",ee,[e("div",te,[se,n(e("select",{class:"form-control","onUpdate:modelValue":s[2]||(s[2]=t=>o.edu_order.teacher_id=t),placeholder:"\u0412\u044B\u0431\u0440\u0430\u0442\u044C",required:""},[oe,(r(!0),i(u,null,_(o.teachers,t=>(r(),i("option",{key:"teacher"+t.id,value:t.id},h(t.fio),9,de))),128))],512),[[c,o.edu_order.teacher_id]])])]),e("div",re,[e("div",ie,[ne,n(e("select",{class:"form-control","onUpdate:modelValue":s[3]||(s[3]=t=>o.edu_order.shift_id=t),onChange:s[4]||(s[4]=a(t=>l.calculatePrice(!0),["prevent"])),placeholder:"\u0412\u044B\u0431\u0440\u0430\u0442\u044C",required:""},[le,(r(!0),i(u,null,_(o.shifts,t=>(r(),i("option",{key:"shift"+t.id,value:t.id},h(t.name),9,ae))),128))],544),[[c,o.edu_order.shift_id]])])])]),e("div",ue,[e("div",ce,[e("div",_e,[he,n(e("select",{class:"form-control",onChange:s[5]||(s[5]=a(t=>l.calculatePrice(!0),["prevent"])),"onUpdate:modelValue":s[6]||(s[6]=t=>o.edu_order.course_type_id=t),placeholder:"\u0412\u044B\u0431\u0440\u0430\u0442\u044C",required:""},[me,(r(!0),i(u,null,_(o.courseTypes,t=>(r(),i("option",{key:"courseType"+t.id,value:t.id},h(t.name),9,fe))),128))],544),[[c,o.edu_order.course_type_id]])])]),e("div",ve,[e("div",be,[pe,n(e("select",{class:"form-control",onChange:s[7]||(s[7]=a(t=>l.calculatePrice(!0),["prevent"])),"onUpdate:modelValue":s[8]||(s[8]=t=>o.edu_order.train_type_id=t),placeholder:"\u0412\u044B\u0431\u0440\u0430\u0442\u044C",required:""},[ye,(r(!0),i(u,null,_(o.trainTypes,t=>(r(),i("option",{key:"trainType"+t.id,value:t.id},h(t.name),9,ge))),128))],544),[[c,o.edu_order.train_type_id]])])]),e("div",we,[e("div",Oe,[je,n(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[9]||(s[9]=t=>f.eduOrder.price=t),name:"eduOrderPricePrice",placeholder:"\u0426\u0435\u043D\u0430"},null,512),[[m,f.eduOrder.price]])])])]),e("div",Ve,[e("div",ke,[e("div",xe,[Ce,n(e("input",{type:"date",class:"form-control",onChange:s[10]||(s[10]=a(t=>l.add28Days(),["prevent"])),"onUpdate:modelValue":s[11]||(s[11]=t=>o.edu_order.start_date=t),name:"eduOrderPrice",required:""},null,544),[[m,o.edu_order.start_date]])])]),e("div",Pe,[e("div",Se,[Te,n(e("input",{type:"date",class:"form-control","onUpdate:modelValue":s[12]||(s[12]=t=>o.edu_order.end_date=t),name:"eduOrderPrice",required:""},null,512),[[m,o.edu_order.end_date]])])])]),e("div",Ue,[e("div",De,[n(e("input",{type:"checkbox","onUpdate:modelValue":s[13]||(s[13]=t=>o.edu_order.enable=t),class:"custom-control-input",id:"customSwitch1","true-value":"1","false-value":"0"},null,512),[[k,o.edu_order.enable]]),qe])])]),e("div",Be,[Le,e("button",{type:"button",class:"btn btn-danger",onClick:s[14]||(s[14]=a(t=>d.back(),["prevent"]))}," \u0410\u0440\u0442\u049B\u0430 ")])],32)])])]),_:1})],64)}const Ie=y(P,[["render",Ae]]);export{Ie as default};
