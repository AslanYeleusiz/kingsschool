import{_ as k,A as g}from"./AdminLayout.678ac4e5.js";import{L as D,H as w,r as p,o as t,a as o,e as x,w as b,F as c,b as e,t as u,f as O,v as B,h as r,g as m,n as S,d as j}from"./app.e85b8d70.js";import{P as C}from"./Pagination.f55796c5.js";const T={components:{AdminLayout:g,Link:D,Pagination:C,Head:w},props:["schedule","schedule_day","lastDayOfMonth","journals","likeThisDate","days"],data(){var d;return{loading:0,journal_students:(d=this.journals)!=null?d:[],isPopupOpen:!1,student_id:null,status:null,hiddenOrio:!1,parsedDays:[]}},computed:{statusByStudentId(){return(d,n)=>{const s=this.journal_students.find(_=>{const a=new Date(_.date);return _.edu_order_id===d&&a.getDate()===n});return s?s.type:0}}},mounted(){this.parsedDays=this.days},methods:{submit(d,n,s){axios.post(route("admin.journal.store",{schedule_id:this.schedule.id}),{teacher_id:this.schedule.teacher_id,edu_order_id:s,group_id:this.schedule.group_id,type:d,date:this.schedule.year+"-"+this.schedule.month+"-"+n}).then(_=>{this.journal_students=_.data.journals})},changeStatus(d,n,s){switch(s){case 0:return this.submit(1,n,d);case 1:return this.submit(2,n,d);case 2:return this.submit(0,n,d)}}}},I=e("head",null,[e("title",null,"\u0410\u0434\u043C\u0438\u043D \u043F\u0430\u043D\u0435\u043B\u044C | \u0416\u0443\u0440\u043D\u0430\u043B")],-1),L={class:"row mb-2"},V={class:"col-sm-6"},A={class:"m-0"},M={class:"mt-1"},N={class:"col-sm-6"},P={class:"breadcrumb float-sm-right"},F={class:"breadcrumb-item"},H=["href"],q=e("i",{class:"fas fa-dashboard"},null,-1),z=j(" \u0413\u043B\u0430\u0432\u043D\u0430\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 "),E=[q,z],U=e("li",{class:"breadcrumb-item active"}," \u0416\u0443\u0440\u043D\u0430\u043B ",-1),G={key:0,class:"d-f j-b"},J=e("div",null,null,-1),K={class:"form-group"},Q={class:"custom-control custom-switch"},R=e("label",{class:"custom-control-label",for:"customSwitchB"},"\u0421\u043A\u0440\u044B\u0442\u044C \u043B\u0438\u0448\u043D\u0438\u0435 \u0434\u043D\u0438",-1),W={class:"container-fluid"},X={class:"card"},Y={class:"card-body overflow-auto"},Z={class:"row"},$={class:"col-sm-12"},ee={class:"table table-hover table-bordered dataTable dtr-inline"},se={role:"row"},te=e("th",null,"\u2116",-1),oe=e("th",null,"\u0410\u0442\u044B",-1),de={key:0,class:"t-c"},ie={class:"odd"},ne=["onClick"],ae={key:0,class:"fas fa-solid fa-plus"},le={key:1,class:"fas fa-solid fa-minus"};function ce(d,n,s,_,a,h){const y=p("AdminLayout");return t(),o(c,null,[I,x(y,null,{breadcrumbs:b(()=>[e("div",L,[e("div",V,[e("h1",A,"\u0416\u0443\u0440\u043D\u0430\u043B \u043F\u0440\u0435\u043F\u043E\u0434\u0430\u0432\u0430\u0442\u0435\u043B\u044F "+u(s.schedule.teacher.fio),1),e("h5",M,"\u0413\u0440\u0443\u043F\u043F\u0430: "+u(s.schedule.group.name),1)]),e("div",N,[e("ol",P,[e("li",F,[e("a",{href:d.route("admin.index")},E,8,H)]),U])])]),s.likeThisDate?(t(),o("div",G,[J,e("div",K,[e("div",Q,[O(e("input",{type:"checkbox","onUpdate:modelValue":n[0]||(n[0]=i=>a.hiddenOrio=i),class:"custom-control-input",id:"customSwitchB"},null,512),[[B,a.hiddenOrio]]),R])])])):r("",!0)]),default:b(()=>[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[e("div",$,[e("table",ee,[e("thead",null,[e("tr",se,[te,oe,(t(!0),o(c,null,m(s.lastDayOfMonth,i=>(t(),o(c,{key:i},[a.parsedDays.includes(i)?(t(),o(c,{key:0},[!a.hiddenOrio||i==s.schedule_day&&s.likeThisDate?(t(),o("th",de,u(i)+" "+u(a.hiddenOrio?"(\u0421\u0435\u0433\u043E\u0434\u043D\u044F)":""),1)):r("",!0)],64)):r("",!0)],64))),128))])]),e("tbody",null,[(t(!0),o(c,null,m(s.schedule.group_orders,(i,v)=>{var f;return t(),o("tr",ie,[e("td",null,u(v+1),1),e("td",null,u((f=i.edu_order.user)==null?void 0:f.fio),1),(t(!0),o(c,null,m(s.lastDayOfMonth,l=>(t(),o(c,{key:l},[a.parsedDays.includes(l)?(t(),o(c,{key:0},[!a.hiddenOrio||l==s.schedule_day&&s.likeThisDate?(t(),o("td",{key:0,onClick:re=>h.changeStatus(i.edu_order_id,l,h.statusByStudentId(i.edu_order_id,l)),class:S([[l==s.schedule_day&&s.likeThisDate?"c-p bg":"disabled"],"square"])},[h.statusByStudentId(i.edu_order_id,l)==1?(t(),o("i",ae)):r("",!0),h.statusByStudentId(i.edu_order_id,l)==2?(t(),o("i",le)):r("",!0)],10,ne)):r("",!0)],64)):r("",!0)],64))),128))])}),256))])])])])])])])]),_:1})],64)}const me=k(T,[["render",ce]]);export{me as default};
