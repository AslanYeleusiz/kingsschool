import{_ as k,A as g}from"./AdminLayout.5406395a.js";import{L as w,H as x,r as D,o,a as i,e as B,w as b,F as c,b as t,t as r,q as C,x as O,g as u,f as m,n as S,d as T}from"./app.24e8fd2a.js";import{P as j}from"./Pagination.608cedd9.js";const p={components:{AdminLayout:g,Link:w,Pagination:j,Head:x},props:["schedule","schedule_day","lastDayOfMonth","journals","likeThisDate"],data(){var s;return{loading:0,journal_students:(s=this.journals)!=null?s:[],isPopupOpen:!1,student_id:null,status:null,hiddenOrio:!1}},computed:{statusByStudentId(){return(s,n)=>{const e=this.journal_students.find(h=>{const a=new Date(h.date);return h.edu_order_id===s&&a.getDate()===n});return e?e.type:0}}},methods:{submit(s,n){axios.post(route("admin.journal.store",{schedule_id:this.schedule.id}),{teacher_id:this.schedule.teacher_id,edu_order_id:n,group_id:this.schedule.group_id,type:s,date:this.schedule.date}).then(e=>{this.journal_students=e.data.journals})},changeStatus(s,n,e){if(n==this.schedule_day&&this.likeThisDate)switch(e){case 0:return this.submit(1,s);case 1:return this.submit(2,s);case 2:return this.submit(0,s)}},deleteData(s){Swal.fire({title:"\u0416\u043E\u044E\u0493\u0430 \u0441\u0435\u043D\u0456\u043C\u0434\u0456\u0441\u0456\u0437 \u0431\u0435?",text:"\u049A\u0430\u0439\u0442\u044B\u043F \u049B\u0430\u043B\u043F\u044B\u043D\u0430 \u043A\u0435\u043B\u043C\u0435\u0443\u0456 \u043C\u04AF\u043C\u043A\u0456\u043D!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u0418\u04D9, \u0436\u043E\u044F\u043C\u044B\u043D!",cancelButtonText:"\u0416\u043E\u049B"}).then(n=>{n.isConfirmed&&this.$inertia.delete(route("admin.journal.destroy",s))})}}},I=t("head",null,[t("title",null,"\u0410\u0434\u043C\u0438\u043D \u043F\u0430\u043D\u0435\u043B\u044C | \u0416\u0443\u0440\u043D\u0430\u043B")],-1),L={class:"row mb-2"},V={class:"col-sm-6"},A={class:"m-0"},M={class:"mt-1"},N={class:"col-sm-6"},P={class:"breadcrumb float-sm-right"},q={class:"breadcrumb-item"},F=["href"],H=t("i",{class:"fas fa-dashboard"},null,-1),z=T(" \u0413\u043B\u0430\u0432\u043D\u0430\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 "),E=[H,z],U=t("li",{class:"breadcrumb-item active"}," \u0416\u0443\u0440\u043D\u0430\u043B ",-1),G={key:0,class:"d-f j-b"},J=t("div",null,null,-1),K={class:"form-group"},Q={class:"custom-control custom-switch"},R=t("label",{class:"custom-control-label",for:"customSwitch1"},"\u0421\u043A\u0440\u044B\u0442\u044C \u043B\u0438\u0448\u043D\u0438\u0435 \u0434\u043D\u0438",-1),W={class:"container-fluid"},X={class:"card"},Y={class:"card-body overflow-auto"},Z={class:"row"},$={class:"col-sm-12"},tt={class:"table table-hover table-bordered dataTable dtr-inline"},et={role:"row"},st=t("th",null,"\u2116",-1),ot=t("th",null,"\u0410\u0442\u044B",-1),it={key:0,class:"t-c"},dt={class:"odd"},nt=["onClick"],at={key:0,class:"fas fa-solid fa-plus"},lt={key:1,class:"fas fa-solid fa-minus"};function ct(s,n,e,h,a,_){const y=D("AdminLayout");return o(),i(c,null,[I,B(y,null,{breadcrumbs:b(()=>[t("div",L,[t("div",V,[t("h1",A,"\u0416\u0443\u0440\u043D\u0430\u043B \u043F\u0440\u0435\u043F\u043E\u0434\u0430\u0432\u0430\u0442\u0435\u043B\u044F "+r(e.schedule.teacher.fio),1),t("h5",M,"\u0413\u0440\u0443\u043F\u043F\u0430: "+r(e.schedule.group.name),1)]),t("div",N,[t("ol",P,[t("li",q,[t("a",{href:s.route("admin.index")},E,8,F)]),U])])]),e.likeThisDate?(o(),i("div",G,[J,t("div",K,[t("div",Q,[C(t("input",{type:"checkbox","onUpdate:modelValue":n[0]||(n[0]=d=>a.hiddenOrio=d),class:"custom-control-input",id:"customSwitch1"},null,512),[[O,a.hiddenOrio]]),R])])])):u("",!0)]),default:b(()=>[t("div",W,[t("div",X,[t("div",Y,[t("div",Z,[t("div",$,[t("table",tt,[t("thead",null,[t("tr",et,[st,ot,(o(!0),i(c,null,m(e.lastDayOfMonth,d=>(o(),i(c,{key:d},[!a.hiddenOrio||d==e.schedule_day&&e.likeThisDate?(o(),i("th",it,r(d)+" "+r(a.hiddenOrio?"(\u0421\u0435\u0433\u043E\u0434\u043D\u044F)":""),1)):u("",!0)],64))),128))])]),t("tbody",null,[(o(!0),i(c,null,m(e.schedule.group_orders,(d,v)=>{var f;return o(),i("tr",dt,[t("td",null,r(v+1),1),t("td",null,r((f=d.edu_order.user)==null?void 0:f.fio),1),(o(!0),i(c,null,m(e.lastDayOfMonth,l=>(o(),i(c,{key:l},[!a.hiddenOrio||l==e.schedule_day&&e.likeThisDate?(o(),i("td",{key:0,onClick:rt=>_.changeStatus(d.edu_order_id,l,_.statusByStudentId(d.edu_order_id,l)),class:S([[l==e.schedule_day&&e.likeThisDate?"c-p bg":"disabled"],"square"])},[_.statusByStudentId(d.edu_order_id,l)==1?(o(),i("i",at)):u("",!0),_.statusByStudentId(d.edu_order_id,l)==2?(o(),i("i",lt)):u("",!0)],10,nt)):u("",!0)],64))),128))])}),256))])])])])])])])]),_:1})],64)}const mt=k(p,[["render",ct]]);export{mt as default};
