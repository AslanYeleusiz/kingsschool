import{_ as k,A as V}from"./AdminLayout.7c96938c.js";import{L as U,H as C,r as f,o as d,a as r,e as l,w as g,F as h,b as e,k as u,l as n,v as c,g as v,s as T,p,f as b,u as L,t as y,d as w}from"./app.983aea31.js";import{P as A}from"./Pagination.4c7cb4f1.js";import{V as B}from"./ValidationError.3b2bdc21.js";const S={components:{AdminLayout:V,Link:U,Pagination:A,ValidationError:B,Head:C},props:["roles","filials","user","auth_user"],data(){return{image:{file:"",preview:""},check_iin:!1,iin:this.user.iin}},methods:{warningText(o,t="\u0411\u0430\u0440\u043B\u044B\u049B \u0431\u0430\u0493\u0430\u043D\u0434\u0430\u0440 \u0442\u043E\u043B\u0442\u044B\u0440\u0443 \u049B\u0430\u0436\u0435\u0442!"){Swal.fire({title:o,text:t,icon:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"\u041E\u043A\u0435\u0439!"})},submit(){if(this.user.iin=this.iin,this.image.file&&(this.user.image=this.image.file),!this.user.role_id)return this.warningText("\u0420\u043E\u043B\u044C \u0442\u0430\u043D\u0434\u0430\u043B\u043C\u0430\u0434\u044B!");if(!this.user.filial_id)return this.warningText("\u0424\u0438\u043B\u0438\u0430\u043B \u0442\u0430\u043D\u0434\u0430\u043B\u043C\u0430\u0434\u044B!");this.user._method="put",this.$inertia.post(route("admin.users.update",this.user.id),this.user,{onError:()=>console.log("An error has occurred"),onSuccess:()=>console.log("The new contact has been saved")})},handleImageUpload(){if(this.image.file=this.$refs.image.files[0],this.image.file){const o=new FileReader;o.onloadend=t=>{this.image.preview=o.result},o.readAsDataURL(this.image.file),this.$refs.image.value=""}else this.user.image="",this.image.file="",this.image.preview=""},checkIin(){this.check_iin=1,axios.get("/admin/check-iin",{params:{iin:this.iin}}).then(o=>{o.data.status==!0&&this.warningText("\u0411\u04B1\u043D\u0434\u0430\u0439 \u0418\u0418\u041D \u0431\u04B1\u0440\u044B\u043D \u0442\u0456\u0440\u043A\u0435\u043B\u0433\u0435\u043D",null),console.log(o.data),this.check_iin=0})}},watch:{iin(o){o.length===12&&this.iin!=this.user.iin&&this.checkIin()}}},E=e("head",null,[e("title",null,"\u0410\u0434\u043C\u0438\u043D \u043F\u0430\u043D\u0435\u043B\u044C | \u049A\u043E\u043B\u0434\u0430\u043D\u0443\u0448\u044B\u043D\u044B \u04E9\u0437\u0433\u0435\u0440\u0442\u0443")],-1),D={class:"row mb-2"},I=e("div",{class:"col-sm-6"},[e("h1",{class:"m-0"},"\u049A\u043E\u043B\u0434\u0430\u043D\u0443\u0448\u044B\u043D\u044B \u04E9\u0437\u0433\u0435\u0440\u0442\u0443")],-1),M={class:"col-sm-6"},N={class:"breadcrumb float-sm-right"},F={class:"breadcrumb-item"},H=["href"],P=e("i",{class:"fas fa-dashboard"},null,-1),R=w(" \u0411\u0430\u0441\u0442\u044B \u0431\u0435\u0442 "),j=[P,R],q={class:"breadcrumb-item"},z=["href"],G=e("i",{class:"fas fa-dashboard"},null,-1),J=w(" \u049A\u043E\u043B\u0434\u0430\u043D\u0443\u0448\u044B\u043B\u0430\u0440 \u0442\u0456\u0437\u0456\u043C\u0456 "),K=[G,J],O=e("li",{class:"breadcrumb-item active"}," \u049A\u043E\u043B\u0434\u0430\u043D\u0443\u0448\u044B\u043D\u044B \u04E9\u0437\u0433\u0435\u0440\u0442\u0443 ",-1),Q={class:"container-fluid"},W={class:"card card-primary"},X={class:"card-body"},Y={class:"row"},Z={class:"col-md-4"},$={class:"form-group"},ee=e("label",{for:""},"\u0418\u0418\u041D",-1),se={class:"row"},te={class:"col-md-4"},ie={class:"form-group"},oe=e("label",{for:""},"\u0424\u0430\u043C\u0438\u043B\u0438\u044F",-1),le={class:"col-md-4"},ne={class:"form-group"},ae=e("label",{for:""},"\u0418\u043C\u044F",-1),de={class:"row"},re={class:"col-md-4"},ce={class:"form-group"},_e=e("label",{for:""},"\u0414\u0430\u0442\u0430 \u0440\u043E\u0436\u0434\u0435\u043D\u044C\u044F",-1),ue={class:"col-md-4"},me={class:"form-group"},he=e("label",{for:""},"\u0422\u0435\u043B\u0435\u0444\u043E\u043D",-1),fe={key:0,class:"col-md-4"},ge={class:"form-group"},ve=e("label",{for:""},"\u0422\u0435\u043B\u0435\u0444\u043E\u043D \u0440\u043E\u0434\u0438\u0442\u0435\u043B\u044F",-1),pe={class:"form-group file-upload"},be=e("label",{for:""},"\u0421\u0443\u0440\u0435\u0442",-1),ye={class:"ml-2"},we=["src"],xe=["src"],ke={class:"file-input",style:{"margin-right":"10px"}},Ve=e("label",{for:"image"}," \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C ",-1),Ue={class:"row"},Ce={class:"col-md-4"},Te={class:"form-group"},Le=e("label",{for:""},"\u0420\u043E\u043B\u044C",-1),Ae=e("option",{value:null,hidden:""}," \u0420\u043E\u043B\u044C \u0442\u0430\u04A3\u0434\u0430\u04A3\u044B\u0437 ",-1),Be=["value"],Se={class:"col-md-4"},Ee={class:"form-group"},De=e("label",{for:""},"\u0424\u0438\u043B\u043B\u0438\u0430\u043B",-1),Ie=e("option",{value:null,hidden:""}," \u0424\u0438\u043B\u043B\u0438\u0430\u043B \u0442\u0430\u04A3\u0434\u0430\u04A3\u044B\u0437 ",-1),Me=["value"],Ne={class:"col-md-4"},Fe={class:"form-group"},He=e("label",{for:""},"\u049A\u04B1\u043F\u0438\u044F \u0441\u04E9\u0437",-1),Pe=["type"],Re={class:"row"},je={class:"col-md-4"},qe={class:"form-group"},ze=e("label",{for:""},"\u0414\u0430\u0442\u0430 \u043D\u0430\u0447\u0430\u043B\u043E \u043E\u0431\u0443\u0447\u0435\u043D\u0438\u044F",-1),Ge={class:"card-footer"},Je=e("button",{type:"submit",class:"btn btn-primary mr-1"}," \u0421\u0430\u049B\u0442\u0430\u0443 ",-1);function Ke(o,t,i,Oe,_,m){const a=f("validation-error"),x=f("AdminLayout");return d(),r(h,null,[E,l(x,null,{breadcrumbs:g(()=>[e("div",D,[I,e("div",M,[e("ol",N,[e("li",F,[e("a",{href:o.route("admin.index")},j,8,H)]),e("li",q,[e("a",{href:o.route("admin.users.index")},K,8,z)]),O])])])]),default:g(()=>[e("div",Q,[e("div",W,[e("form",{method:"post",onSubmit:t[14]||(t[14]=u((...s)=>m.submit&&m.submit(...s),["prevent"]))},[e("div",X,[e("div",Y,[e("div",Z,[e("div",$,[ee,n(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=s=>_.iin=s),name:"iin",placeholder:"\u0418\u0418\u041D",maxlength:"12"},null,512),[[c,_.iin]]),l(a,{field:"iin"})])])]),e("div",se,[e("div",te,[e("div",ie,[oe,n(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=s=>i.user.s_name=s),name:"s_name",placeholder:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"},null,512),[[c,i.user.s_name]]),l(a,{field:"s_name"})])]),e("div",le,[e("div",ne,[ae,n(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=s=>i.user.name=s),name:"name",placeholder:"\u0418\u043C\u044F"},null,512),[[c,i.user.name]]),l(a,{field:"name"})])])]),e("div",de,[e("div",re,[e("div",ce,[_e,n(e("input",{type:"date",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=s=>i.user.birthday=s),name:"birthday",placeholder:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"},null,512),[[c,i.user.birthday]]),l(a,{field:"birthday"})])]),e("div",ue,[e("div",me,[he,n(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=s=>i.user.tel_num=s),name:"tel_num",placeholder:"\u0418\u043C\u044F"},null,512),[[c,i.user.tel_num]]),l(a,{field:"tel_num"})])]),i.user.role_id==4?(d(),r("div",fe,[e("div",ge,[ve,n(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=s=>i.user.tel_num_family=s),name:"tel_num_family",placeholder:"\u0422\u0435\u043B\u0435\u0444\u043E\u043D \u0440\u043E\u0434\u0438\u0442\u0435\u043B\u044F"},null,512),[[c,i.user.tel_num_family]]),l(a,{field:"tel_num_family"})])])):v("",!0)]),e("div",pe,[be,e("div",ye,[i.user.avatar&&!_.image.file?(d(),r("img",{key:0,src:o.route("index")+"/storage/files/"+i.user.avatar,height:"300",alt:"image",style:{"padding-bottom":"10px"}},null,8,we)):v("",!0),n(e("img",{src:_.image.preview,height:"300",style:{"padding-bottom":"10px"}},null,8,xe),[[T,_.image.preview]]),e("div",ke,[e("input",{type:"file",hidden:"",name:"image",onChange:t[6]||(t[6]=s=>m.handleImageUpload()),ref:"image",accept:"image/jpeg,image/png",class:"file",id:"image"},null,544),Ve])]),l(a,{field:"image"})]),e("div",Ue,[e("div",Ce,[e("div",Te,[Le,n(e("select",{class:"form-control",onChange:t[7]||(t[7]=u((...s)=>o.search&&o.search(...s),["prevent"])),"onUpdate:modelValue":t[8]||(t[8]=s=>i.user.role_id=s),placeholder:"\u0411\u0435\u043B\u0441\u0435\u043D\u0434\u0456"},[Ae,(d(!0),r(h,null,b(i.roles,s=>(d(),r("option",{key:"role"+s.id,value:s.id},y(s.name),9,Be))),128))],544),[[p,i.user.role_id]]),l(a,{field:"role_id"})])]),e("div",Se,[e("div",Ee,[De,n(e("select",{class:"form-control",onChange:t[9]||(t[9]=u((...s)=>o.search&&o.search(...s),["prevent"])),"onUpdate:modelValue":t[10]||(t[10]=s=>i.user.filial_id=s),placeholder:"\u0411\u0435\u043B\u0441\u0435\u043D\u0434\u0456"},[Ie,(d(!0),r(h,null,b(i.filials,s=>(d(),r("option",{key:"filial"+s.id,value:s.id},y(s.name),9,Me))),128))],544),[[p,i.user.filial_id]]),l(a,{field:"filial_id"})])]),e("div",Ne,[e("div",Fe,[He,n(e("input",{type:i.auth_user.role_id!=1?"password":"text",class:"form-control","onUpdate:modelValue":t[11]||(t[11]=s=>i.user.real_password=s),name:"real_password",placeholder:"\u049A\u04B1\u043F\u0438\u044F \u0441\u04E9\u0437"},null,8,Pe),[[L,i.user.real_password]]),l(a,{field:"real_password"})])])]),e("div",Re,[e("div",je,[e("div",qe,[ze,n(e("input",{type:"date",class:"form-control","onUpdate:modelValue":t[12]||(t[12]=s=>i.user.start_edu_date=s),required:""},null,512),[[c,i.user.start_edu_date]])])])]),e("div",Ge,[Je,e("button",{type:"button",class:"btn btn-danger",onClick:t[13]||(t[13]=u(s=>o.back(),["prevent"]))}," \u0410\u0440\u0442\u049B\u0430 ")])])],32)])])]),_:1})],64)}const Ze=k(S,[["render",Ke]]);export{Ze as default};
