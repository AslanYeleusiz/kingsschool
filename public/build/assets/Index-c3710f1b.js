import{_ as w,A as B}from"./AdminLayout-e2a9f783.js";import{L,H as S,r as h,o as i,e as _,b as m,w as p,F as v,a as t,t as l,i as A,g as f,v as b,f as x,h as g,n as C,d as j}from"./app-76f5f351.js";import{P as V}from"./Pagination-6b5293cb.js";const P={components:{AdminLayout:B,Link:L,Pagination:V,Head:S},props:["eduPaidOrders","teacher"],data(){return{filter:{fio:route().params.fio?route().params.fio:null},loading:0,penalty:0,bonus:0}},methods:{getSalary(d){Swal.fire({title:"Выдать зарплату?",text:"Отчёт о предыдущих зарплатах можно увидеть на панеле отчёта!",icon:"success",showCancelButton:!0,confirmButtonColor:"#71DD37",cancelButtonColor:"#d33",confirmButtonText:"Выдать!",cancelButtonText:"Отмена"}).then(o=>{o.isConfirmed&&this.$inertia.post(route("admin.teachers.reportStore",d),{penalty:this.penalty,bonus:this.bonus,price:this.calculateAllPrice(1)+(this.bonus-this.penalty)})})},calculateAllPrice(d){return this.eduPaidOrders.reduce((e,a)=>e+(d?a.newPrice:a.price),0)}}},T=t("head",null,[t("title",null,"Админ панель | Отчет")],-1),D={class:"row mb-2"},N={class:"col-sm-6"},I={class:"m-0"},F=t("h5",{class:"m-0"},"Отчет для выдачи зарплаты за этот период",-1),H={class:"col-sm-6"},M={class:"breadcrumb float-sm-right"},U={class:"breadcrumb-item"},z=["href"],E=t("i",{class:"fas fa-dashboard"},null,-1),q=j(" Главная страница "),G=[E,q],J=t("li",{class:"breadcrumb-item active"}," Отчет ",-1),K={key:0,class:"container-fluid"},Q={class:"card"},R={class:"card-body"},W={class:"row"},X={class:"col-sm-12"},Y={class:"table table-hover table-bordered table-striped dataTable dtr-inline"},Z=t("thead",null,[t("tr",{role:"row"},[t("th",null,"№"),t("th"),t("th",null,"ФИО"),t("th",null,"Предмет"),t("th",{class:"t-c"},"Статус"),t("th",{class:"t-c"},"Общ. кол-во занятий (часов)"),t("th",{class:"t-c"},"Кол-во оств. занятий (часов)"),t("th",{class:"t-c"},"Кол-во пройденных занятий (часов)"),t("th",{class:"t-c"},"Оплата"),t("th",{class:"t-c"},"Зарплата")])],-1),O={class:"d-f aj-c"},$=["onClick"],tt={class:"d-f j-c"},st={class:"paidBlock"},lt=t("div",{class:"paid success"},"Оплачено",-1),ot={class:"paid date"},nt={class:"t-c"},et={class:"t-c"},dt={class:"t-c"},ct={class:"d-f j-c"},it={class:"paidBlock"},_t={class:"paid success"},at={class:"paid date"},ut=t("td",null,[t("div",{class:"d-f j-c"},[t("span",{class:"badge badge-warning"}," Не выдано ")])],-1),rt=t("tr",null,[t("td"),t("td"),t("td"),t("td"),t("td"),t("td"),t("td"),t("td"),t("td"),t("td")],-1),ht={class:"odd"},mt=t("td",null,null,-1),pt=t("td",null,null,-1),vt=t("td",null,null,-1),ft=t("td",null,null,-1),bt=t("td",null,null,-1),gt=t("td",null,null,-1),yt=t("td",null,null,-1),kt=t("td",{class:"t-r"},"Общее",-1),wt={class:"d-f j-c"},Bt={class:"paidBlock"},Lt={class:"paid pd success no-hover"},St={class:"paid date no-hover"},At=t("td",null,null,-1),xt={class:"odd"},Ct=t("td",null,null,-1),jt=t("td",null,null,-1),Vt=t("td",null,null,-1),Pt=t("td",null,null,-1),Tt=t("td",null,null,-1),Dt=t("td",null,null,-1),Nt=t("td",null,null,-1),It=t("td",{class:"t-r"},"Штраф",-1),Ft=t("td",null,null,-1),Ht={class:"odd"},Mt=t("td",null,null,-1),Ut=t("td",null,null,-1),zt=t("td",null,null,-1),Et=t("td",null,null,-1),qt=t("td",null,null,-1),Gt=t("td",null,null,-1),Jt=t("td",null,null,-1),Kt=t("td",{class:"t-r"},"Премия",-1),Qt=t("td",null,null,-1),Rt={class:"odd"},Wt=t("td",null,null,-1),Xt=t("td",null,null,-1),Yt=t("td",null,null,-1),Zt=t("td",null,null,-1),Ot=t("td",null,null,-1),$t=t("td",null,null,-1),ts=t("td",null,null,-1),ss=t("td",{class:"t-r"},"Итог",-1),ls={class:"d-f j-c"},os={class:"paidBlock"},ns={class:"paid pd success no-hover"},es={class:"paid date no-hover"},ds=t("td",null,null,-1),cs={key:0,class:"odd"},is=t("td",null,null,-1),_s=t("td",null,null,-1),as=t("td",null,null,-1),us=t("td",null,null,-1),rs=t("td",null,null,-1),hs=t("td",null,null,-1),ms=t("td",null,null,-1),ps=t("td",null,null,-1),vs=t("td",null,null,-1);function fs(d,o,e,a,n,c){const y=h("Pagination"),k=h("AdminLayout");return i(),_(v,null,[T,m(k,null,{breadcrumbs:p(()=>[t("div",D,[t("div",N,[t("h1",I,[t("b",null,l(e.teacher.fio),1)]),F]),t("div",H,[t("ol",M,[t("li",U,[t("a",{href:d.route("admin.index")},G,8,z)]),J])])])]),default:p(()=>[e.eduPaidOrders.length?(i(),_("div",K,[t("div",Q,[t("div",R,[t("div",W,[t("div",X,[t("table",Y,[Z,t("tbody",null,[(i(!0),_(v,null,A(e.eduPaidOrders,(s,u)=>(i(),_("tr",{class:"odd",key:"eduPaidOrder"+s.id},[t("td",null,l(s.from?s.from+u:u+1),1),t("td",O,[t("div",{class:"avatar",style:C({backgroundImage:`url(/storage/files/${s.edu_order.user.avatar})`}),onClick:bs=>{var r;return d.$page.props.flash.image=(r=s.edu_order.user)==null?void 0:r.avatar}},null,12,$)]),t("td",null,l(s.edu_order.user.fio),1),t("td",null,l(s.edu_order.subject?s.edu_order.subject.name:"Нет данных"),1),t("td",null,[t("div",tt,[t("div",st,[lt,t("div",ot,"до "+l(s.date),1)])])]),t("td",nt,l(s.edu_order.hours),1),t("td",et,l(s.remain_hours-s.completed_hours),1),t("td",dt,l(s.completed_hours),1),t("td",null,[t("div",ct,[t("div",it,[t("div",_t,l(s.price.toLocaleString()),1),t("div",at,l(s.newPrice.toLocaleString()),1)])])]),ut]))),128)),rt,t("tr",ht,[mt,pt,vt,ft,bt,gt,yt,kt,t("td",null,[t("div",wt,[t("div",Bt,[t("div",Lt,l(c.calculateAllPrice(0).toLocaleString()),1),t("div",St,l(c.calculateAllPrice(1).toLocaleString()),1)])])]),At]),t("tr",xt,[Ct,jt,Vt,Pt,Tt,Dt,Nt,It,t("td",null,[f(t("input",{type:"integer",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=s=>n.penalty=s)},null,512),[[b,n.penalty]])]),Ft]),t("tr",Ht,[Mt,Ut,zt,Et,qt,Gt,Jt,Kt,t("td",null,[f(t("input",{type:"integer",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=s=>n.bonus=s)},null,512),[[b,n.bonus]])]),Qt]),t("tr",Rt,[Wt,Xt,Yt,Zt,Ot,$t,ts,ss,t("td",null,[t("div",ls,[t("div",os,[t("div",ns,l(c.calculateAllPrice(0).toLocaleString()),1),t("div",es,l((c.calculateAllPrice(1)+(n.bonus-n.penalty)).toLocaleString()),1)])])]),ds]),c.calculateAllPrice(1)+(n.bonus-n.penalty)>0?(i(),_("tr",cs,[is,_s,as,us,rs,hs,ms,ps,t("td",null,[t("button",{onClick:o[2]||(o[2]=x(s=>c.getSalary(e.teacher.id),["prevent"])),class:"btn btn-success w-100"},"Выдать зарплату")]),vs])):g("",!0)])])])]),m(y,{links:e.eduPaidOrders.links},null,8,["links"])])])])):g("",!0)]),_:1})],64)}const ws=w(P,[["render",fs]]);export{ws as default};
