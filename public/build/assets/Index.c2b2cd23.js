import{_ as v,A as g}from"./AdminLayout.6d433b19.js";import{L as D,H as w,r as x,o,a as d,e as B,w as b,F as c,b as e,t as u,q as p,x as C,g as r,f as m,n as O,d as S}from"./app.a694719e.js";import{P as j}from"./Pagination.2e748b97.js";const T={components:{AdminLayout:g,Link:D,Pagination:j,Head:w},props:["schedule","schedule_day","lastDayOfMonth","journals","likeThisDate","days"],data(){var s;return{loading:0,journal_students:(s=this.journals)!=null?s:[],isPopupOpen:!1,student_id:null,status:null,hiddenOrio:!1,parsedDays:[]}},computed:{statusByStudentId(){return(s,i)=>{const t=this.journal_students.find(h=>{const a=new Date(h.date);return h.edu_order_id===s&&a.getDate()===i});return t?t.type:0}}},mounted(){this.parsedDays=this.days},methods:{submit(s,i,t){axios.post(route("admin.journal.store",{schedule_id:this.schedule.id}),{teacher_id:this.schedule.teacher_id,edu_order_id:t,group_id:this.schedule.group_id,type:s,date:this.schedule.year+"-"+this.schedule.month+"-"+i}).then(h=>{this.journal_students=h.data.journals})},changeStatus(s,i,t){switch(t){case 0:return this.submit(1,i,s);case 1:return this.submit(2,i,s);case 2:return this.submit(0,i,s)}},deleteData(s){Swal.fire({title:"\u0416\u043E\u044E\u0493\u0430 \u0441\u0435\u043D\u0456\u043C\u0434\u0456\u0441\u0456\u0437 \u0431\u0435?",text:"\u049A\u0430\u0439\u0442\u044B\u043F \u049B\u0430\u043B\u043F\u044B\u043D\u0430 \u043A\u0435\u043B\u043C\u0435\u0443\u0456 \u043C\u04AF\u043C\u043A\u0456\u043D!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u0418\u04D9, \u0436\u043E\u044F\u043C\u044B\u043D!",cancelButtonText:"\u0416\u043E\u049B"}).then(i=>{i.isConfirmed&&this.$inertia.delete(route("admin.journal.destroy",s))})}}},I=e("head",null,[e("title",null,"\u0410\u0434\u043C\u0438\u043D \u043F\u0430\u043D\u0435\u043B\u044C | \u0416\u0443\u0440\u043D\u0430\u043B")],-1),L={class:"row mb-2"},V={class:"col-sm-6"},A={class:"m-0"},M={class:"mt-1"},N={class:"col-sm-6"},P={class:"breadcrumb float-sm-right"},q={class:"breadcrumb-item"},F=["href"],H=e("i",{class:"fas fa-dashboard"},null,-1),z=S(" \u0413\u043B\u0430\u0432\u043D\u0430\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 "),E=[H,z],U=e("li",{class:"breadcrumb-item active"}," \u0416\u0443\u0440\u043D\u0430\u043B ",-1),G={key:0,class:"d-f j-b"},J=e("div",null,null,-1),K={class:"form-group"},Q={class:"custom-control custom-switch"},R=e("label",{class:"custom-control-label",for:"customSwitch1"},"\u0421\u043A\u0440\u044B\u0442\u044C \u043B\u0438\u0448\u043D\u0438\u0435 \u0434\u043D\u0438",-1),W={class:"container-fluid"},X={class:"card"},Y={class:"card-body overflow-auto"},Z={class:"row"},$={class:"col-sm-12"},ee={class:"table table-hover table-bordered dataTable dtr-inline"},te={role:"row"},se=e("th",null,"\u2116",-1),oe=e("th",null,"\u0410\u0442\u044B",-1),de={key:0,class:"t-c"},ie={class:"odd"},ne=["onClick"],ae={key:0,class:"fas fa-solid fa-plus"},le={key:1,class:"fas fa-solid fa-minus"};function ce(s,i,t,h,a,_){const y=x("AdminLayout");return o(),d(c,null,[I,B(y,null,{breadcrumbs:b(()=>[e("div",L,[e("div",V,[e("h1",A,"\u0416\u0443\u0440\u043D\u0430\u043B \u043F\u0440\u0435\u043F\u043E\u0434\u0430\u0432\u0430\u0442\u0435\u043B\u044F "+u(t.schedule.teacher.fio),1),e("h5",M,"\u0413\u0440\u0443\u043F\u043F\u0430: "+u(t.schedule.group.name),1)]),e("div",N,[e("ol",P,[e("li",q,[e("a",{href:s.route("admin.index")},E,8,F)]),U])])]),t.likeThisDate?(o(),d("div",G,[J,e("div",K,[e("div",Q,[p(e("input",{type:"checkbox","onUpdate:modelValue":i[0]||(i[0]=n=>a.hiddenOrio=n),class:"custom-control-input",id:"customSwitch1"},null,512),[[C,a.hiddenOrio]]),R])])])):r("",!0)]),default:b(()=>[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[e("div",$,[e("table",ee,[e("thead",null,[e("tr",te,[se,oe,(o(!0),d(c,null,m(t.lastDayOfMonth,n=>(o(),d(c,{key:n},[a.parsedDays.includes(n)?(o(),d(c,{key:0},[!a.hiddenOrio||n==t.schedule_day&&t.likeThisDate?(o(),d("th",de,u(n)+" "+u(a.hiddenOrio?"(\u0421\u0435\u0433\u043E\u0434\u043D\u044F)":""),1)):r("",!0)],64)):r("",!0)],64))),128))])]),e("tbody",null,[(o(!0),d(c,null,m(t.schedule.group_orders,(n,k)=>{var f;return o(),d("tr",ie,[e("td",null,u(k+1),1),e("td",null,u((f=n.edu_order.user)==null?void 0:f.fio),1),(o(!0),d(c,null,m(t.lastDayOfMonth,l=>(o(),d(c,{key:l},[a.parsedDays.includes(l)?(o(),d(c,{key:0},[!a.hiddenOrio||l==t.schedule_day&&t.likeThisDate?(o(),d("td",{key:0,onClick:re=>_.changeStatus(n.edu_order_id,l,_.statusByStudentId(n.edu_order_id,l)),class:O([[l==t.schedule_day&&t.likeThisDate?"c-p bg":"disabled"],"square"])},[_.statusByStudentId(n.edu_order_id,l)==1?(o(),d("i",ae)):r("",!0),_.statusByStudentId(n.edu_order_id,l)==2?(o(),d("i",le)):r("",!0)],10,ne)):r("",!0)],64)):r("",!0)],64))),128))])}),256))])])])])])])])]),_:1})],64)}const me=v(T,[["render",ce]]);export{me as default};
